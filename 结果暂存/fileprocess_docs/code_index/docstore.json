{"docstore/metadata": {"c62f298b-62e3-43a8-84b9-2f015be29ff5": {"doc_hash": "79e12aa933f43fda5b8414baf48474ff83621dc317d8e6839c9d54bb81dde0da"}, "076ad533-d7da-4fb6-851c-e1edc0c25a2f": {"doc_hash": "4320a02616a5e60b90121fba901ab3dfcfa2656983038f9caf1d67d1e0b54d98"}, "7b4a5c4f-3112-477a-9d4d-ce18cfbde326": {"doc_hash": "93cd87aa5c11986d290d760a7b76593216eb92fbda50d424dd3901e8f0ca21f4"}, "edcf4e1a-f7c7-405f-84ce-0934434784d9": {"doc_hash": "d3842a2d765b238622355870ab2d6c01d0e512a8312171ac59fc99507ea4f677"}, "ab95e54f-0464-4871-9d3c-7d7ba8b8d258": {"doc_hash": "0461859f0d3e5916421f27c57cef781d96039a2c0bc18c20ef2152e01e09b07a"}, "c0a8d0d4-54b6-4b6c-b256-b6903c71ab17": {"doc_hash": "b21cda2eb8489072b233c0fc9f509a2d7dac08bd360e2742071baf075c0334c7"}, "d48cb8ca-2942-4ef8-90e2-b42a283b7d19": {"doc_hash": "2deb854157776c51f1bf9619678b11d97273dfc6b4754b110c1c3dbc2abd6395"}, "f5543823-49df-4004-8f65-d45bfea60607": {"doc_hash": "aca3fa03fb488c960a9393ab4dd8364aa2c6fec0666ece676819ded01c45a2fc"}, "0bd9865d-65e8-42bb-90fd-a54e0824efe1": {"doc_hash": "763653213c13bb7b106b19176128b6f4e5c8d81ed47c2479513f6e51cecfd5f1", "ref_doc_id": "c62f298b-62e3-43a8-84b9-2f015be29ff5"}, "07f0204b-dd68-402e-8b14-46bb7f2c2ed4": {"doc_hash": "562b6edad7b3f88efc6188fc77714ada9d1ae3d3ec943a34939e17cbafd05892", "ref_doc_id": "076ad533-d7da-4fb6-851c-e1edc0c25a2f"}, "e9ee715e-5123-4f84-8da6-60966283ef37": {"doc_hash": "0d48ca26eea0c43b3c338335d38be6e37326b316278dc6e77f8a543bbf9edefe", "ref_doc_id": "7b4a5c4f-3112-477a-9d4d-ce18cfbde326"}, "635f511d-baf2-4b7f-9454-a148480fbed7": {"doc_hash": "8df146529c389d6c8edea07805ce6f1e8a71d7a383c1fd47fcf5296f2a6206c9", "ref_doc_id": "edcf4e1a-f7c7-405f-84ce-0934434784d9"}, "94628c67-2da6-4b8e-824e-5e1ef550525e": {"doc_hash": "1b7194e93347c80260e32467802c2182b58b7cea3cb164b197b954a90137cc8a", "ref_doc_id": "ab95e54f-0464-4871-9d3c-7d7ba8b8d258"}, "73b32942-6f48-465d-ac42-7b97e2fea2f5": {"doc_hash": "39f0340ed06ff31faf70b2fcd6a6f9f9a77ef7cd31ac937c3a0df812a12db875", "ref_doc_id": "c0a8d0d4-54b6-4b6c-b256-b6903c71ab17"}, "dd340ca5-5b44-4ea9-955c-63d1abd9108d": {"doc_hash": "5c11210873785561221b12efd0f9bf5ac1d4d9ea0ce747f632655ffcc6431304", "ref_doc_id": "d48cb8ca-2942-4ef8-90e2-b42a283b7d19"}, "26427ae9-0679-4480-964b-570f53febd5c": {"doc_hash": "0876c9a387f1d012fb9897235f7d6c410651be785b703ad112636dfeca9c5ae5", "ref_doc_id": "f5543823-49df-4004-8f65-d45bfea60607"}}, "docstore/ref_doc_info": {"c62f298b-62e3-43a8-84b9-2f015be29ff5": {"node_ids": ["0bd9865d-65e8-42bb-90fd-a54e0824efe1"], "metadata": {"file_path": "backend/database.py", "function_name": "save_sentiment", "symbol_id": "backend.database.save_sentiment", "type": "function", "start_line": 18, "end_line": 50}}, "076ad533-d7da-4fb6-851c-e1edc0c25a2f": {"node_ids": ["07f0204b-dd68-402e-8b14-46bb7f2c2ed4"], "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "get_dynamodb_client", "symbol_id": "backend.init_dynamodb.get_dynamodb_client", "type": "function", "start_line": 16, "end_line": 18}}, "7b4a5c4f-3112-477a-9d4d-ce18cfbde326": {"node_ids": ["e9ee715e-5123-4f84-8da6-60966283ef37"], "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "table_exists", "symbol_id": "backend.init_dynamodb.table_exists", "type": "function", "start_line": 20, "end_line": 28}}, "edcf4e1a-f7c7-405f-84ce-0934434784d9": {"node_ids": ["635f511d-baf2-4b7f-9454-a148480fbed7"], "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "wait_for_table", "symbol_id": "backend.init_dynamodb.wait_for_table", "type": "function", "start_line": 30, "end_line": 41}}, "ab95e54f-0464-4871-9d3c-7d7ba8b8d258": {"node_ids": ["94628c67-2da6-4b8e-824e-5e1ef550525e"], "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "create_sentiment_table", "symbol_id": "backend.init_dynamodb.create_sentiment_table", "type": "function", "start_line": 43, "end_line": 115}}, "c0a8d0d4-54b6-4b6c-b256-b6903c71ab17": {"node_ids": ["73b32942-6f48-465d-ac42-7b97e2fea2f5"], "metadata": {"file_path": "backend/main.py", "function_name": "main", "symbol_id": "backend.main.main", "type": "function", "start_line": 7, "end_line": 73}}, "d48cb8ca-2942-4ef8-90e2-b42a283b7d19": {"node_ids": ["dd340ca5-5b44-4ea9-955c-63d1abd9108d"], "metadata": {"file_path": "backend/processing.py", "function_name": "convert_to_html", "symbol_id": "backend.processing.convert_to_html", "type": "function", "start_line": 5, "end_line": 46}}, "f5543823-49df-4004-8f65-d45bfea60607": {"node_ids": ["26427ae9-0679-4480-964b-570f53febd5c"], "metadata": {"file_path": "backend/processing.py", "function_name": "analyze_sentiment", "symbol_id": "backend.processing.analyze_sentiment", "type": "function", "start_line": 48, "end_line": 108}}}, "docstore/data": {"0bd9865d-65e8-42bb-90fd-a54e0824efe1": {"__data__": {"id_": "0bd9865d-65e8-42bb-90fd-a54e0824efe1", "embedding": null, "metadata": {"file_path": "backend/database.py", "function_name": "save_sentiment", "symbol_id": "backend.database.save_sentiment", "type": "function", "start_line": 18, "end_line": 50}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c62f298b-62e3-43a8-84b9-2f015be29ff5", "node_type": "4", "metadata": {"file_path": "backend/database.py", "function_name": "save_sentiment", "symbol_id": "backend.database.save_sentiment", "type": "function", "start_line": 18, "end_line": 50}, "hash": "79e12aa933f43fda5b8414baf48474ff83621dc317d8e6839c9d54bb81dde0da", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def save_sentiment(filename, sentiment_data):\n    \"\"\"\n    Save AWS Comprehend sentiment analysis results to DynamoDB\n    \n    Parameters\n    ----------\n    filename: str\n        The name of the file being analyzed\n    sentiment_data: dict\n        Dictionary containing sentiment analysis results, must contain 'Sentiment' and 'SentimentScore' keys\n        sentiment_data['Sentiment']: Overall sentiment (POSITIVE/NEGATIVE/NEUTRAL/MIXED)\n        sentiment_data['SentimentScore']: Confidence scores for Positive, Negative, Neutral, Mixed\n    \"\"\"\n    try:\n        table = dynamodb.Table(TABLE_NAME)\n        \n        last_modified = datetime.utcnow().isoformat()\n        response = table.put_item(\n            Item={\n                'filename': filename,\n                'last_modified': last_modified,\n                'overall_sentiment': sentiment_data['Sentiment'],\n                'positive': str(sentiment_data['SentimentScore']['Positive']),\n                'negative': str(sentiment_data['SentimentScore']['Negative']),\n                'neutral': str(sentiment_data['SentimentScore']['Neutral']),\n                'mixed': str(sentiment_data['SentimentScore']['Mixed'])\n            }\n        )\n        \n        print(f\"[Database] Sentiment analysis results saved to DynamoDB: {filename} -> {sentiment_data['Sentiment']}\")\n    except Exception as e:\n        print(f\"[Database Error] Failed to save sentiment analysis results: {e}\")\n        raise", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1446, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "07f0204b-dd68-402e-8b14-46bb7f2c2ed4": {"__data__": {"id_": "07f0204b-dd68-402e-8b14-46bb7f2c2ed4", "embedding": null, "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "get_dynamodb_client", "symbol_id": "backend.init_dynamodb.get_dynamodb_client", "type": "function", "start_line": 16, "end_line": 18}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "076ad533-d7da-4fb6-851c-e1edc0c25a2f", "node_type": "4", "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "get_dynamodb_client", "symbol_id": "backend.init_dynamodb.get_dynamodb_client", "type": "function", "start_line": 16, "end_line": 18}, "hash": "4320a02616a5e60b90121fba901ab3dfcfa2656983038f9caf1d67d1e0b54d98", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def get_dynamodb_client():\n    \"\"\"Get DynamoDB client\"\"\"\n    return boto3.client('dynamodb', region_name=AWS_REGION)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 116, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e9ee715e-5123-4f84-8da6-60966283ef37": {"__data__": {"id_": "e9ee715e-5123-4f84-8da6-60966283ef37", "embedding": null, "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "table_exists", "symbol_id": "backend.init_dynamodb.table_exists", "type": "function", "start_line": 20, "end_line": 28}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7b4a5c4f-3112-477a-9d4d-ce18cfbde326", "node_type": "4", "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "table_exists", "symbol_id": "backend.init_dynamodb.table_exists", "type": "function", "start_line": 20, "end_line": 28}, "hash": "93cd87aa5c11986d290d760a7b76593216eb92fbda50d424dd3901e8f0ca21f4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def table_exists(client, table_name):\n    \"\"\"Check if the table exists\"\"\"\n    try:\n        client.describe_table(TableName=table_name)\n        return True\n    except ClientError as e:\n        if e.response['Error']['Code'] == 'ResourceNotFoundException':\n            return False\n        raise", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 293, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "635f511d-baf2-4b7f-9454-a148480fbed7": {"__data__": {"id_": "635f511d-baf2-4b7f-9454-a148480fbed7", "embedding": null, "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "wait_for_table", "symbol_id": "backend.init_dynamodb.wait_for_table", "type": "function", "start_line": 30, "end_line": 41}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "edcf4e1a-f7c7-405f-84ce-0934434784d9", "node_type": "4", "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "wait_for_table", "symbol_id": "backend.init_dynamodb.wait_for_table", "type": "function", "start_line": 30, "end_line": 41}, "hash": "d3842a2d765b238622355870ab2d6c01d0e512a8312171ac59fc99507ea4f677", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def wait_for_table(client, table_name):\n    \"\"\"Wait for the table to become ACTIVE\"\"\"\n    print(f\"  Waiting for table {table_name} to become ACTIVE...\")\n    waiter = client.get_waiter('table_exists')\n    waiter.wait(\n        TableName=table_name,\n        WaiterConfig={\n            'Delay': 2,\n            'MaxAttempts': 30\n        }\n    )\n    print(f\"  \u2713 Table {table_name} is ready\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 385, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "94628c67-2da6-4b8e-824e-5e1ef550525e": {"__data__": {"id_": "94628c67-2da6-4b8e-824e-5e1ef550525e", "embedding": null, "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "create_sentiment_table", "symbol_id": "backend.init_dynamodb.create_sentiment_table", "type": "function", "start_line": 43, "end_line": 115}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ab95e54f-0464-4871-9d3c-7d7ba8b8d258", "node_type": "4", "metadata": {"file_path": "backend/init_dynamodb.py", "function_name": "create_sentiment_table", "symbol_id": "backend.init_dynamodb.create_sentiment_table", "type": "function", "start_line": 43, "end_line": 115}, "hash": "0461859f0d3e5916421f27c57cef781d96039a2c0bc18c20ef2152e01e09b07a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def create_sentiment_table():\n    \"\"\"\n    Create sentiment analysis results table\n    \n    Table Structure:\n    - Primary Key: filename (String) - Partition Key\n    - Attributes: \n        - last_modified: Last modified time\n        - overall_sentiment: Overall sentiment (POSITIVE/NEGATIVE/NEUTRAL/MIXED)\n        - positive: Positive sentiment score\n        - negative: Negative sentiment score\n        - neutral: Neutral sentiment score\n        - mixed: Mixed sentiment score\n    \"\"\"\n    print('\\n========================================')\n    print('File Processing App - DynamoDB Table Initialization')\n    print('========================================')\n    print(f'Region: {AWS_REGION}')\n    print(f'Table Name: {TABLE_NAME}')\n    print('')\n    \n    client = get_dynamodb_client()\n    \n    if table_exists(client, TABLE_NAME):\n        print(f'\u2713 Table already exists: {TABLE_NAME}')\n        print('\\nHint: Table created, you can use the application directly')\n        return\n    \n    print(f'Creating table: {TABLE_NAME}')\n    \n    try:\n        client.create_table(\n            TableName=TABLE_NAME,\n            KeySchema=[\n                {\n                    'AttributeName': 'filename',\n                    'KeyType': 'HASH'  # Partition Key\n                }\n            ],\n            AttributeDefinitions=[\n                {\n                    'AttributeName': 'filename',\n                    'AttributeType': 'S'  # String Type\n                }\n            ],\n            BillingMode='PAY_PER_REQUEST'  # Pay-per-request mode, no throughput specified\n        )\n        \n        wait_for_table(client, TABLE_NAME)\n        \n        print('\\n========================================')\n        print('\u2713 Table initialization completed!')\n        print('========================================')\n        print(f'\\nCreated table:')\n        print(f'  - {TABLE_NAME}')\n        print(f'    Primary Key: filename (String)')\n        print(f'    Billing Mode: PAY_PER_REQUEST')\n        print('\\nHint: You can start the application now!')\n        \n    except ClientError as e:\n        print(f'\\n Failed to create table: {e}')\n        \n        if e.response['Error']['Code'] == 'UnrecognizedClientException':\n            print('Hint: Please check AWS credentials configuration')\n            print('  Method 1: aws configure')\n            print('  Method 2: Set environment variables AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY')\n        elif e.response['Error']['Code'] == 'ResourceInUseException':\n            print('Hint: Table already exists')\n        \n        sys.exit(1)\n    except Exception as e:\n        print(f'\\n Initialization failed: {e}')\n        sys.exit(1)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2672, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "73b32942-6f48-465d-ac42-7b97e2fea2f5": {"__data__": {"id_": "73b32942-6f48-465d-ac42-7b97e2fea2f5", "embedding": null, "metadata": {"file_path": "backend/main.py", "function_name": "main", "symbol_id": "backend.main.main", "type": "function", "start_line": 7, "end_line": 73}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c0a8d0d4-54b6-4b6c-b256-b6903c71ab17", "node_type": "4", "metadata": {"file_path": "backend/main.py", "function_name": "main", "symbol_id": "backend.main.main", "type": "function", "start_line": 7, "end_line": 73}, "hash": "b21cda2eb8489072b233c0fc9f509a2d7dac08bd360e2742071baf075c0334c7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def main():\n    \"\"\"Main program entry point\"\"\"\n    # Set up command line argument parsing\n    parser = argparse.ArgumentParser(\n        description='File Processing Tool - Convert Markdown files to HTML and perform sentiment analysis'\n    )\n    parser.add_argument(\n        'file',\n        type=str,\n        help='Path to the Markdown file to process (e.g., sample.md)'\n    )\n    \n    args = parser.parse_args()\n    input_file = args.file\n    \n    if not os.path.exists(input_file):\n        print(f\"[Error] File not found: {input_file}\")\n        sys.exit(1)\n    \n    if not (input_file.endswith('.md') or input_file.endswith('.markdown')):\n        print(f\"[Warning] File does not seem to be in Markdown format (.md/.markdown), but processing will continue\")\n    \n    print(\"=\" * 60)\n    print(\"File Processing Tool\")\n    print(\"=\" * 60)\n    print(f\"Processing file: {input_file}\")\n    print()\n    \n    print(\"-\" * 60)\n    print(\"Feature 1: Format Conversion (Markdown -> HTML)\")\n    print(\"-\" * 60)\n    try:\n        html_file = convert_to_html(input_file)\n        print()\n    except Exception as e:\n        print(f\"[Fatal Error] Format conversion failed, program terminated\")\n        sys.exit(1)\n\n    print(\"-\" * 60)\n    print(\"Feature 2: Sentiment Analysis\")\n    print(\"-\" * 60)\n    try:\n        sentiment_data = analyze_sentiment(input_file)\n        print()\n    except Exception as e:\n        print(f\"[Fatal Error] Sentiment analysis failed, program terminated\")\n        sys.exit(1)\n    \n    # Save sentiment analysis results to database\n    print(\"-\" * 60)\n    print(\"Saving results to database\")\n    print(\"-\" * 60)\n    try:\n        filename = os.path.basename(input_file)\n        save_sentiment(filename, sentiment_data)\n        print()\n    except Exception as e:\n        print(f\"[Fatal Error] Failed to save results, program terminated\")\n        sys.exit(1)\n    \n    # Complete\n    print(\"=\" * 60)\n    print(\"Processing completed!\")\n    print(\"=\" * 60)\n    print(f\"HTML File: {html_file}\")\n    print(f\"Sentiment Results: Saved to DynamoDB database\")\n    print()", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2067, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "dd340ca5-5b44-4ea9-955c-63d1abd9108d": {"__data__": {"id_": "dd340ca5-5b44-4ea9-955c-63d1abd9108d", "embedding": null, "metadata": {"file_path": "backend/processing.py", "function_name": "convert_to_html", "symbol_id": "backend.processing.convert_to_html", "type": "function", "start_line": 5, "end_line": 46}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d48cb8ca-2942-4ef8-90e2-b42a283b7d19", "node_type": "4", "metadata": {"file_path": "backend/processing.py", "function_name": "convert_to_html", "symbol_id": "backend.processing.convert_to_html", "type": "function", "start_line": 5, "end_line": 46}, "hash": "2deb854157776c51f1bf9619678b11d97273dfc6b4754b110c1c3dbc2abd6395", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def convert_to_html(input_filepath, output_dir='output/html'):\n    \"\"\"\n    Convert Markdown file to HTML file\n    \n    Parameters\n    ----------\n    input_filepath: str\n        Path to the input Markdown file\n    output_dir: str\n        Directory for output HTML files, default is 'output/html'\n    \n    Returns\n    -------\n    str\n        Path to the generated HTML file\n    \"\"\"\n    try:\n        os.makedirs(output_dir, exist_ok=True)\n\n        with open(input_filepath, 'r', encoding='utf-8') as f:\n            markdown_text = f.read()\n\n        html_content = markdown.markdown(markdown_text)\n\n        filename = os.path.basename(input_filepath)\n        html_filename = os.path.splitext(filename)[0] + '.html'\n        output_filepath = os.path.join(output_dir, html_filename)\n\n        with open(output_filepath, 'w', encoding='utf-8') as f:\n            f.write(html_content)\n        \n        print(f\"[Format Conversion] Conversion successful: {filename} -> {html_filename}\")\n        print(f\"[Format Conversion] HTML file saved to: {output_filepath}\")\n        \n        return output_filepath\n    \n    except FileNotFoundError:\n        print(f\"[Format Conversion Error] File not found: {input_filepath}\")\n        raise\n    except Exception as e:\n        print(f\"[Format Conversion Error] Conversion failed: {e}\")\n        raise", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1325, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "26427ae9-0679-4480-964b-570f53febd5c": {"__data__": {"id_": "26427ae9-0679-4480-964b-570f53febd5c", "embedding": null, "metadata": {"file_path": "backend/processing.py", "function_name": "analyze_sentiment", "symbol_id": "backend.processing.analyze_sentiment", "type": "function", "start_line": 48, "end_line": 108}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f5543823-49df-4004-8f65-d45bfea60607", "node_type": "4", "metadata": {"file_path": "backend/processing.py", "function_name": "analyze_sentiment", "symbol_id": "backend.processing.analyze_sentiment", "type": "function", "start_line": 48, "end_line": 108}, "hash": "aca3fa03fb488c960a9393ab4dd8364aa2c6fec0666ece676819ded01c45a2fc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def analyze_sentiment(input_filepath):\n    \"\"\"\n    Analyze text file sentiment using AWS Comprehend\n    \n    Parameters\n    ----------\n    input_filepath: str\n        Path to the input text file\n    \n    Returns\n    -------\n    dict\n        Dictionary containing sentiment analysis results, including:\n        - Sentiment: Overall sentiment (POSITIVE/NEGATIVE/NEUTRAL/MIXED)\n        - SentimentScore: Confidence scores for each sentiment\n            - Positive: Positive sentiment score (between 0 and 1)\n            - Negative: Negative sentiment score (between 0 and 1)\n            - Neutral: Neutral sentiment score (between 0 and 1)\n            - Mixed: Mixed sentiment score (between 0 and 1)\n    \"\"\"\n    try:\n        with open(input_filepath, 'r', encoding='utf-8') as f:\n            text = f.read()\n\n        if len(text.encode('utf-8')) > 5000:\n            print(f\"[Sentiment Analysis Warning] Text too long, truncating to first 5000 bytes\")\n            while len(text.encode('utf-8')) > 5000:\n                text = text[:-100]\n        \n        aws_region = os.getenv('AWS_REGION', 'us-east-1')\n        comprehend_client = boto3.client('comprehend', region_name=aws_region)\n        \n        # Use AWS Comprehend for sentiment analysis\n        response = comprehend_client.detect_sentiment(\n            Text=text,\n            LanguageCode='en'\n        )\n        \n        overall_sentiment = response['Sentiment']\n        sentiment_score = response['SentimentScore']\n        \n        sentiment_data = {\n            'Sentiment': overall_sentiment,\n            'SentimentScore': sentiment_score\n        }\n        \n        print(f\"[Sentiment Analysis] Analysis completed\")\n        print(f\"[Sentiment Analysis] Overall Sentiment: {overall_sentiment}\")\n        print(f\"[Sentiment Analysis] Sentiment Scores: Positive={sentiment_score['Positive']:.3f}, \"\n              f\"Negative={sentiment_score['Negative']:.3f}, \"\n              f\"Neutral={sentiment_score['Neutral']:.3f}, \"\n              f\"Mixed={sentiment_score['Mixed']:.3f}\")\n        \n        return sentiment_data\n    \n    except FileNotFoundError:\n        print(f\"[Sentiment Analysis Error] File not found: {input_filepath}\")\n        raise\n    except Exception as e:\n        print(f\"[Sentiment Analysis Error] Analysis failed: {e}\")\n        raise", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2304, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}}}