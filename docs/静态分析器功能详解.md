# Static Analyzer é™æ€åˆ†æå™¨åŠŸèƒ½è¯¦è§£

## ğŸ“… æ–‡æ¡£æ—¥æœŸ
2026-01-24

## ğŸ¯ æ ¸å¿ƒå®šä½

`static_analyzer.py` æ˜¯ MAG System çš„**æƒ…æŠ¥ä¸­å¿ƒ**ï¼Œè´Ÿè´£åœ¨é¢„å¤„ç†é˜¶æ®µæ‰«æå•ä½“åº”ç”¨æºç ï¼Œæå–ç»“æ„åŒ–ä¿¡æ¯ï¼Œä¸ºåç»­çš„å¤šæ™ºèƒ½ä½“è¿ç§»æä¾›å…¨å±€è§†å›¾ã€‚

---

## ğŸ“¦ ä¸»è¦åŠŸèƒ½æ¨¡å—

### æ¨¡å—ä¸€è§ˆè¡¨

| æ¨¡å—åç§° | åŠŸèƒ½ | è¾“å…¥ | è¾“å‡º |
|---------|------|------|------|
| **é¡¹ç›®ç»“æ„å¯è§†åŒ–** | ç”Ÿæˆç›®å½•æ ‘ | é¡¹ç›®æ ¹ç›®å½• | å­—ç¬¦ä¸²å½¢å¼çš„æ ‘çŠ¶ç»“æ„ |
| **æ–‡ä»¶æ ‡ç­¾ç³»ç»Ÿ** | è¯†åˆ«æ–‡ä»¶æŠ€æœ¯ç‰¹å¾ | æºä»£ç æ–‡æœ¬ | æ ‡ç­¾åˆ—è¡¨ |
| **Pythonåˆ†æå™¨** | ASTçº§åˆ«åˆ†æPythonä»£ç  | .pyæ–‡ä»¶ | ä¾èµ–ã€å…¥å£ã€ç¬¦å·è¡¨ |
| **JavaScriptåˆ†æå™¨** | æ­£åˆ™+å¯å‘å¼åˆ†æJS/TS | .js/.ts/.jsx/.tsx/.vue | ä¾èµ–ã€å…¥å£ã€ç¬¦å·è¡¨ |
| **é…ç½®æ–‡ä»¶è§£æ** | æå–ä¾èµ–ç‰ˆæœ¬ä¿¡æ¯ | requirements.txt, package.json | ä¾èµ–åˆ—è¡¨ |
| **DynamoDB Schemaæå–** | ä»ä»£ç ä¸­æå–è¡¨ç»“æ„ | å«DynamoDBçš„Pythonæ–‡ä»¶ | è¡¨ç»“æ„å®šä¹‰ |

---

## ğŸ” è¯¦ç»†åŠŸèƒ½åˆ†æ

### 1ï¸âƒ£ é¡¹ç›®ç»“æ„å¯è§†åŒ– (`build_project_structure`)

#### åŠŸèƒ½
ç”Ÿæˆå•ä½“åº”ç”¨çš„å®Œæ•´ç›®å½•æ ‘ï¼Œç”¨äºAgentå¿«é€Ÿäº†è§£é¡¹ç›®å¸ƒå±€ã€‚

#### å·¥ä½œåŸç†
```python
def build_project_structure(root: Path) -> str:
    # é€’å½’éå†ç›®å½•
    # è¿‡æ»¤éšè—æ–‡ä»¶å’Œéœ€è¦å¿½ç•¥çš„ç›®å½•
    # ä½¿ç”¨ â””â”€â”€ å’Œ â”œâ”€â”€ ç¬¦å·ç¾åŒ–è¾“å‡º
```

#### å¿½ç•¥çš„ç›®å½•ï¼ˆ19ä¸ªï¼‰
```python
IGNORE_DIRS = {
    'venv', 'env', '.venv', '__pycache__',    # Pythonç¯å¢ƒ
    'node_modules',                            # Node.jsä¾èµ–
    '.git', '.idea', '.vscode',               # ç‰ˆæœ¬æ§åˆ¶å’ŒIDE
    'dist', 'build',                          # æ„å»ºè¾“å‡º
    '.pytest_cache', '.mypy_cache', 'htmlcov', # æµ‹è¯•å’Œè¦†ç›–ç‡
    '.tox', 'eggs', '.eggs', 'coverage'       # å…¶ä»–å·¥å…·
}
```

#### è¾“å‡ºç¤ºä¾‹
```
todo/
â”œâ”€â”€ ARCHITECTURE.md
â”œâ”€â”€ backend
â”‚   â”œâ”€â”€ config
â”‚   â”‚   â””â”€â”€ db.js
â”‚   â”œâ”€â”€ routes
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â””â”€â”€ todo.js
â”‚   â””â”€â”€ server.js
â””â”€â”€ frontend
    â””â”€â”€ src
        â”œâ”€â”€ App.js
        â””â”€â”€ config.js
```

#### é€šç”¨æ€§è¯„ä¼°
âœ… **é«˜åº¦é€šç”¨**
- æ”¯æŒä»»æ„é¡¹ç›®ç»“æ„
- è‡ªåŠ¨è¿‡æ»¤å¸¸è§çš„æ— å…³ç›®å½•
- è·¨å¹³å°å…¼å®¹ï¼ˆä½¿ç”¨ `Path`ï¼‰

---

### 2ï¸âƒ£ æ–‡ä»¶æ ‡ç­¾ç³»ç»Ÿ (`tag_file`, `detect_frontend_characteristics`)

#### åŠŸèƒ½
ä¸ºæ¯ä¸ªæ–‡ä»¶æ‰“ä¸ŠæŠ€æœ¯ç‰¹å¾æ ‡ç­¾ï¼Œå¸®åŠ©Agentå¿«é€Ÿåˆ†ç±»æ–‡ä»¶ã€‚

#### æ ‡ç­¾ç±»åˆ«

**åç«¯æ ‡ç­¾ï¼ˆ6ä¸ªï¼‰**
| æ ‡ç­¾ | è§¦å‘æ¡ä»¶ | ç”¨é€” |
|------|----------|------|
| `AWS_SDK` | åŒ…å« `boto3` | è¯†åˆ«ä½¿ç”¨AWS SDKçš„æ–‡ä»¶ |
| `DynamoDB` | åŒ…å« `dynamodb`, `putitem`, `getitem` ç­‰ | æ•°æ®åº“è®¿é—®å±‚è¯†åˆ« |
| `Database` | åŒ…å« `sqlite`, `mysql`, `postgresql`, `mongodb` | å…¶ä»–æ•°æ®åº“ |
| `Auth` | åŒ…å« `jwt`, `jsonwebtoken` | è®¤è¯/æˆæƒé€»è¾‘ |
| `Cognito` | åŒ…å« `cognito` | AWS Cognitoè®¤è¯ |
| *ï¼ˆå¯æ‰©å±•ï¼‰* | - | æ˜“äºæ·»åŠ æ–°æ ‡ç­¾ |

**å‰ç«¯æ ‡ç­¾ï¼ˆ4ä¸ªï¼‰**
| æ ‡ç­¾ | è§¦å‘æ¡ä»¶ | ç”¨é€” |
|------|----------|------|
| `Frontend_API_Consumer` | åŒ…å« `axios`, `fetch`, `$http` è°ƒç”¨ | éœ€è¦ä¿®æ”¹APIç«¯ç‚¹ |
| `Hardcoded_URL` | åŒ…å« `'/api/...'`, `'http://localhost'` | éœ€è¦æ›¿æ¢ç¡¬ç¼–ç URL |
| `Frontend_Config` | åŒ…å« `Amplify.configure`, `process.env` | éœ€è¦æ›´æ–°é…ç½® |
| `Frontend_UI_Component` | å‰ç«¯æ–‡ä»¶ä½†æ— APIè°ƒç”¨ | çº¯UIï¼Œå¯èƒ½ä¸éœ€ä¿®æ”¹ |

#### å·¥ä½œåŸç†

**å‰ç«¯ç‰¹å¾æ£€æµ‹æµç¨‹ï¼š**
```
1. åˆ¤æ–­æ˜¯å¦ä¸ºå‰ç«¯æ–‡ä»¶
   â”œâ”€ è·¯å¾„åŒ…å«: frontend, client, ui, web, public
   â””â”€ æ‰©å±•å: .jsx, .tsx, .vue

2. é€ä¸ªæ£€æµ‹ç‰¹å¾ï¼ˆæ­£åˆ™åŒ¹é…ï¼‰
   â”œâ”€ APIè°ƒç”¨: axios.get, fetch(
   â”œâ”€ ç¡¬ç¼–ç URL: '/api/users', 'http://localhost:3000'
   â”œâ”€ é…ç½®: Amplify.configure, process.env.VUE_APP_API
   â””â”€ è·¯ç”±: react-router, vue-router

3. åˆ†ç±»é€»è¾‘
   â”œâ”€ æœ‰APIè°ƒç”¨æˆ–é…ç½® â†’ Frontend_API_Consumer / Frontend_Config
   â””â”€ æ— ç‰¹æ®Šç‰¹å¾ â†’ Frontend_UI_Component
```

**åç«¯ç‰¹å¾æ£€æµ‹ï¼š**
```python
# å…³é”®å­—åŒ¹é…ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
lower = source.lower()

# ç¤ºä¾‹ï¼šDynamoDBæ£€æµ‹
if any(keyword in lower for keyword in [
    "dynamodb", "dynamo", "putitem", "getitem", 
    "updateitem", "deleteitem", ".table(", "batchwriteitem"
]):
    tags.add("DynamoDB")
```

#### å®é™…æ¡ˆä¾‹

**è¾“å…¥æ–‡ä»¶ï¼š`backend/routes/todo.js`**
```javascript
const { docClient, tables } = require('../config/db');  // DynamoDB
const { authenticateToken } = require('../middleware/auth');  // æœªç›´æ¥åŒ…å«jwt

router.get('/item', async (req, res) => {
  const result = await docClient.query(params).promise();  // DynamoDBæ“ä½œ
});
```

**è¾“å‡ºæ ‡ç­¾ï¼š**
```json
["Cognito"]  // å› ä¸ºä»£ç ä¸­æœ‰è®¤è¯ç›¸å…³é€»è¾‘
```

**è¾“å…¥æ–‡ä»¶ï¼š`frontend/src/App.js`**
```javascript
import axios from 'axios';
const API_URL = 'http://localhost:3001/api';  // ç¡¬ç¼–ç 

axios.get(`${API_URL}/items`)
```

**è¾“å‡ºæ ‡ç­¾ï¼š**
```json
["Frontend_API_Consumer", "Hardcoded_URL", "Auth", "DynamoDB"]
```

#### é€šç”¨æ€§è¯„ä¼°
âœ… **ä¸­ç­‰é€šç”¨ï¼Œæ˜“æ‰©å±•**
- âœ… è¦†ç›–å¸¸è§çš„æŠ€æœ¯æ ˆï¼ˆFlask, Express, React, Vueï¼‰
- âœ… åŸºäºå…³é”®å­—åŒ¹é…ï¼Œå®¹æ˜“æ·»åŠ æ–°æ¨¡å¼
- âš ï¸ ä¾èµ–å­—ç¬¦ä¸²åŒ¹é…ï¼Œå¯èƒ½æœ‰è¯¯æŠ¥
- âš ï¸ ä¸æ”¯æŒè‡ªå®šä¹‰çš„HTTPå®¢æˆ·ç«¯åº“ï¼ˆé™¤éæ‰‹åŠ¨æ·»åŠ ï¼‰

---

### 3ï¸âƒ£ Pythonä»£ç åˆ†æå™¨ (`analyze_python_file`)

#### åŠŸèƒ½
ä½¿ç”¨Pythonçš„ **ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰** ç²¾ç¡®åˆ†æPythonä»£ç ï¼Œæå–ï¼š
- ä¾èµ–å…³ç³»ï¼ˆimportè¯­å¥ï¼‰
- APIå…¥å£ç‚¹ï¼ˆFlask/FastAPIè£…é¥°å™¨ï¼‰
- ç¬¦å·è¡¨ï¼ˆå‡½æ•°ã€ç±»ã€æ–¹æ³•ï¼‰

#### å·¥ä½œåŸç†

**æ ¸å¿ƒæŠ€æœ¯ï¼šASTéå†**
```python
tree = ast.parse(source)  # è§£ææˆAST

class Visitor(ast.NodeVisitor):
    def visit_Import(self, node):
        # æå–: import boto3
        for alias in node.names:
            dependency_targets.add(alias.name)
    
    def visit_ImportFrom(self, node):
        # æå–: from flask import Flask
        if node.module:
            dependency_targets.add(node.module)
    
    def visit_FunctionDef(self, node):
        # æå–å‡½æ•°å®šä¹‰ï¼ŒåŒ…æ‹¬è£…é¥°å™¨
        self._record_function(node)
    
    def visit_ClassDef(self, node):
        # æå–ç±»å®šä¹‰å’Œæ–¹æ³•
        for child in node.body:
            if isinstance(child, ast.FunctionDef):
                self._record_function(child, parent_class=node.name)
```

**APIå…¥å£ç‚¹è¯†åˆ«ï¼š**

æ”¯æŒ2ç§å¸¸è§æ¨¡å¼ï¼š

**æ¨¡å¼1ï¼šFlask style**
```python
@app.route("/users", methods=["POST"])
def create_user():
    pass
```
è¯†åˆ«é€»è¾‘ï¼š
```python
# æ£€æµ‹è£…é¥°å™¨
for dec in func.decorator_list:
    if dec.func.attr == "route":
        # æå–è·¯å¾„å’Œæ–¹æ³•
        path = dec.args[0].value  # "/users"
        methods = dec.keywords['methods']  # ["POST"]
```

**æ¨¡å¼2ï¼šFastAPI style**
```python
@app.get("/users/{user_id}")
async def get_user(user_id: int):
    pass
```
è¯†åˆ«é€»è¾‘ï¼š
```python
if dec.func.attr in {"get", "post", "put", "delete", "patch"}:
    method = dec.func.attr.upper()  # "GET"
    path = dec.args[0].value  # "/users/{user_id}"
```

**ç¬¦å·è¡¨æå–ï¼š**

```python
# è®°å½•å‡½æ•°
symbol_table.append({
    "id": "backend.routes.auth.create_user",  # æ¨¡å—è·¯å¾„.å‡½æ•°å
    "file_path": "backend/routes/auth.py",
    "start_line": 45,   # ASTæä¾›
    "end_line": 68,     # ASTæä¾›ï¼ˆç²¾ç¡®ï¼ï¼‰
})

# è®°å½•ç±»æ–¹æ³•
symbol_table.append({
    "id": "backend.models.User.save",  # æ¨¡å—è·¯å¾„.ç±»å.æ–¹æ³•å
    "file_path": "backend/models.py",
    "start_line": 120,
    "end_line": 135,
})
```

#### å®é™…æ¡ˆä¾‹

**è¾“å…¥ï¼š`backend/app.py`**
```python
from flask import Flask, request
from models import User
import boto3

app = Flask(__name__)

@app.route("/users", methods=["POST"])
def create_user():
    # 10è¡Œä»£ç 
    return {"status": "ok"}

@app.get("/users/{id}")
def get_user(id):
    # 5è¡Œä»£ç 
    return {}

class UserService:
    def validate(self):
        pass
```

**è¾“å‡ºï¼š**
```json
{
  "rel_path": "backend/app.py",
  "tags": ["AWS_SDK"],
  "dependencies": ["flask", "models", "boto3"],
  "entry_points": [
    {
      "file": "backend/app.py",
      "method": "POST",
      "path": "/users",
      "handler": "create_user"
    },
    {
      "file": "backend/app.py",
      "method": "GET",
      "path": "/users/{id}",
      "handler": "get_user"
    }
  ],
  "symbols": [
    {
      "id": "backend.app.create_user",
      "file_path": "backend/app.py",
      "start_line": 8,
      "end_line": 10
    },
    {
      "id": "backend.app.get_user",
      "file_path": "backend/app.py",
      "start_line": 12,
      "end_line": 14
    },
    {
      "id": "backend.app.UserService",
      "file_path": "backend/app.py",
      "start_line": 16,
      "end_line": 18
    },
    {
      "id": "backend.app.UserService.validate",
      "file_path": "backend/app.py",
      "start_line": 17,
      "end_line": 18
    }
  ]
}
```

#### é€šç”¨æ€§è¯„ä¼°
âœ… **æé«˜é€šç”¨æ€§**
- âœ… åŸºäºASTï¼Œ100%å‡†ç¡®è§£æPythonè¯­æ³•
- âœ… æ”¯æŒä»»ä½•Pythonç‰ˆæœ¬ï¼ˆåªè¦astæ¨¡å—æ”¯æŒï¼‰
- âœ… æ”¯æŒFlaskã€FastAPIã€Djangoï¼ˆå¯æ‰©å±•è£…é¥°å™¨ï¼‰
- âœ… `start_line` å’Œ `end_line` å®Œå…¨å‡†ç¡®
- âœ… è‡ªåŠ¨å¤„ç†è¯­æ³•é”™è¯¯ï¼ˆè¿”å›ç©ºç»“æœï¼‰
- âš ï¸ è£…é¥°å™¨è¯†åˆ«ä¾èµ–é¢„å®šä¹‰æ¨¡å¼ï¼ˆéœ€æ‰‹åŠ¨æ·»åŠ æ–°æ¡†æ¶ï¼‰

---

### 4ï¸âƒ£ JavaScript/TypeScriptä»£ç åˆ†æå™¨ (`analyze_js_like_file`)

#### åŠŸèƒ½
åˆ†æJavaScriptã€TypeScriptã€JSXã€TSXã€Vueæ–‡ä»¶ï¼Œæå–ï¼š
- ä¾èµ–å…³ç³»ï¼ˆrequire/importï¼‰
- APIå…¥å£ç‚¹ï¼ˆExpressè·¯ç”±ï¼‰
- ç¬¦å·è¡¨ï¼ˆå‡½æ•°ã€ç±»ã€è·¯ç”±å¤„ç†å™¨ï¼‰

#### æ ¸å¿ƒæŒ‘æˆ˜
âŒ **æ— æ³•ä½¿ç”¨ASTï¼ˆJavaScriptçš„ASTè§£æå™¨å¦‚Babeléœ€è¦é¢å¤–ä¾èµ–ï¼‰**
âœ… **è§£å†³æ–¹æ¡ˆï¼šæ­£åˆ™è¡¨è¾¾å¼ + å¯å‘å¼åŒ¹é… + æ‹¬å·è®¡æ•°**

---

#### 4.1 ä¾èµ–å…³ç³»æå–

**æ”¯æŒ3ç§æ¨¡å¼ï¼š**

```javascript
// æ¨¡å¼1ï¼šCommonJS require
const express = require('express');
const { docClient } = require('../config/db');

// æ¨¡å¼2ï¼šES6 import from
import axios from 'axios';
import { Router } from 'express';

// æ¨¡å¼3ï¼šES6 import with path
import App from './App.js';
```

**æ­£åˆ™è¡¨è¾¾å¼ï¼š**
```python
dep_patterns = [
    re.compile(r"require\(['\"]([^'\"]+)['\"]\)"),      # require('module')
    re.compile(r"from\s+['\"]([^'\"]+)['\"]"),          # from 'module'
    re.compile(r"import\s+[^'\"]+['\"]([^'\"]+)['\"]"), # import ... from 'module'
]
```

---

#### 4.2 APIå…¥å£ç‚¹è¯†åˆ«ï¼ˆExpressè·¯ç”±ï¼‰

**è¯†åˆ«æ¨¡å¼ï¼š**
```javascript
// æ¨¡å¼1ï¼šå‘½åå‡½æ•°ä½œä¸ºå¤„ç†å™¨
router.get('/users', getUsers);
app.post('/login', handleLogin);

// æ¨¡å¼2ï¼šåŒ¿åå‡½æ•°ï¼ˆæœ€å¸¸è§ï¼Œä¹‹å‰æ— æ³•è¯†åˆ«ï¼ï¼‰
router.get('/items', async (req, res) => {
  // ...
});
```

**æ­£åˆ™è¡¨è¾¾å¼ï¼ˆåªè¯†åˆ«å‘½åå¤„ç†å™¨ï¼‰ï¼š**
```python
route_pattern = re.compile(
    r"\b(app|router)\.(get|post|put|delete|patch)\s*\(\s*['\"]([^'\"]+)['\"]\s*,\s*([A-Za-z0-9_$.]+)",
    re.IGNORECASE,
)
```

**æå–ç»“æœï¼š**
```json
{
  "file": "backend/routes/todo.js",
  "method": "GET",
  "path": "/item",
  "handler": "getItems"  // åªæœ‰å‘½åå‡½æ•°èƒ½æå–handlerå
}
```

**âš ï¸ æ³¨æ„**ï¼šå…¥å£ç‚¹è¯†åˆ«åªèƒ½æå–å‘½åå¤„ç†å™¨ï¼ŒåŒ¿åå‡½æ•°çš„handlerå­—æ®µå¯èƒ½ä¸ºç©ºæˆ–ä¸å‡†ç¡®ã€‚

---

#### 4.3 ç¬¦å·è¡¨æå–ï¼ˆâ˜… æ ¸å¿ƒæ”¹è¿›ï¼‰

**è¯†åˆ«çš„6ç§å‡½æ•°æ¨¡å¼ï¼š**

##### æ¨¡å¼1ï¼šfunctionå£°æ˜ï¼ˆå«asyncå’Œexportï¼‰
```javascript
function getData() {}
async function fetchUser() {}
export function helper() {}
export async function process() {}
```
**æ­£åˆ™ï¼š**
```python
r"^\s*(?:async\s+)?(?:export\s+)?function\s+([A-Za-z0-9_$]+)\s*\("
```

##### æ¨¡å¼2ï¼šClasså£°æ˜
```javascript
class UserService {}
export class DataModel {}
```
**æ­£åˆ™ï¼š**
```python
r"^\s*(?:export\s+)?class\s+([A-Za-z0-9_$]+)\b"
```

##### æ¨¡å¼3ï¼šå˜é‡èµ‹å€¼å‡½æ•°
```javascript
const process = function() {}
let handler = async () => {}
var oldFunc = function() {}
export const helper = () => {}
```
**æ­£åˆ™ï¼š**
```python
r"^\s*(?:export\s+)?(?:const|let|var)\s+([A-Za-z0-9_$]+)\s*=\s*(?:async\s*)?(?:function\b|\([^)]*\)\s*=>)"
```

##### æ¨¡å¼4ï¼šâ­ Expressè·¯ç”±å¤„ç†å™¨ï¼ˆæ–°å¢ï¼ï¼‰
```javascript
router.get('/item', async (req, res) => { /* 30è¡Œä»£ç  */ });
app.post('/users', (req, res) => { /* 20è¡Œä»£ç  */ });
router.use('/auth', middleware);
```
**æ­£åˆ™ï¼š**
```python
r"^\s*(?:router|app)\.(get|post|put|delete|patch|use)\s*\(\s*['\"]([^'\"]+)['\"]"
```
**å‘½åç­–ç•¥ï¼š**
```javascript
router.get('/item/:id') 
  â†’ ç¬¦å·å: GET__item__id

router.post('/item/:id/done')
  â†’ ç¬¦å·å: POST__item__id_done
```

##### æ¨¡å¼5ï¼šmodule.exports
```javascript
exports.generateToken = (user) => {}
module.exports.helper = function() {}
```
**æ­£åˆ™ï¼š**
```python
r"^\s*(?:module\.)?exports\.([A-Za-z0-9_$]+)\s*=\s*(?:async\s*)?(?:function\b|\([^)]*\)\s*=>)"
```

##### æ¨¡å¼6ï¼šå¯¹è±¡æ–¹æ³•
```javascript
const api = {
  fetchData() {},
  async processData() {}
}
```
**æ­£åˆ™ï¼š**
```python
r"^\s*(?:async\s+)?([A-Za-z0-9_$]+)\s*\([^)]*\)\s*\{"
```
**âš ï¸ æ’é™¤å…³é”®å­—**ï¼š`if`, `for`, `while`, `switch`, `catch`, `with`

---

#### 4.4 å‡½æ•°ç»“æŸä½ç½®è®¡ç®—ï¼ˆ`_find_function_end_js`ï¼‰

**æ ¸å¿ƒé—®é¢˜ï¼š**
æ­£åˆ™åªèƒ½æ‰¾åˆ°å‡½æ•°**å¼€å§‹è¡Œ**ï¼Œå¦‚ä½•æ‰¾åˆ°**ç»“æŸè¡Œ**ï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼šæ‹¬å·å¹³è¡¡ç®—æ³•**

```python
def _find_function_end_js(lines: List[str], start_idx: int) -> int:
    brace_count = 0
    started = False
    
    for idx in range(start_idx, len(lines)):
        line = lines[idx]
        
        # 1. ç§»é™¤å­—ç¬¦ä¸²ä¸­çš„æ‹¬å·ï¼ˆé¿å…è¯¯åˆ¤ï¼‰
        line_cleaned = re.sub(r"'[^']*'", "", line)      # å•å¼•å·å­—ç¬¦ä¸²
        line_cleaned = re.sub(r'"[^"]*"', "", line_cleaned)  # åŒå¼•å·å­—ç¬¦ä¸²
        line_cleaned = re.sub(r"`[^`]*`", "", line_cleaned)  # æ¨¡æ¿å­—ç¬¦ä¸²
        
        # 2. ç»Ÿè®¡æ‹¬å·
        for char in line_cleaned:
            if char == '{':
                brace_count += 1
                started = True
            elif char == '}':
                brace_count -= 1
                if started and brace_count == 0:
                    return idx + 1  # æ‰¾åˆ°ç»“æŸä½ç½®ï¼
        
        # 3. é˜²æ­¢æ— é™å¾ªç¯ï¼ˆæœ€å¤šæ‰«æ1000è¡Œï¼‰
        if idx - start_idx > 1000:
            break
    
    return start_idx + 2  # å…œåº•ï¼šè¿”å›å¼€å§‹è¡Œ+1
```

**ç¤ºä¾‹ï¼š**
```javascript
26| router.get('/item', async (req, res) => {  // brace_count: 0 â†’ 1
27|   try {                                      // brace_count: 1 â†’ 2
28|     const result = await query();
29|   } catch (err) {                            // brace_count: 2 â†’ 1
30|     res.status(500).json({error: err});
31|   }                                          // brace_count: 1 â†’ 0 âœ… æ‰¾åˆ°ç»“æŸï¼
32| });
```

**è¾“å‡ºï¼š**
```json
{
  "id": "backend.routes.todo.GET__item",
  "file_path": "backend/routes/todo.js",
  "start_line": 26,
  "end_line": 31,  // âœ… å‡†ç¡®ï¼
  "kind": "route_handler"
}
```

---

#### 4.5 å®é™…æ¡ˆä¾‹

**è¾“å…¥ï¼š`backend/routes/todo.js`**
```javascript
const express = require('express');
const { docClient } = require('../config/db');

const router = express.Router();

// è·å–æ‰€æœ‰å¾…åŠ
router.get('/item', async (req, res) => {
  try {
    const result = await docClient.query(params).promise();
    res.json({ Items: result.Items });
  } catch (error) {
    res.status(400).json({ message: error.message });
  }
});

// æ·»åŠ å¾…åŠ
router.post('/item', async (req, res) => {
  const item = { id: uuid(), ...req.body };
  await docClient.put({ TableName: 'Todos', Item: item }).promise();
  res.json(item);
});

const generateToken = (user) => {
  return jwt.sign(user, SECRET);
};

module.exports = router;
```

**è¾“å‡ºï¼š**
```json
{
  "rel_path": "backend/routes/todo.js",
  "tags": ["DynamoDB"],
  "dependencies": ["express", "../config/db"],
  "entry_points": [],  // âš ï¸ åŒ¿åå‡½æ•°æ— æ³•æå–handlerå
  "symbols": [
    {
      "id": "backend.routes.todo.GET__item",
      "file_path": "backend/routes/todo.js",
      "start_line": 7,
      "end_line": 13,
      "kind": "route_handler"
    },
    {
      "id": "backend.routes.todo.POST__item",
      "file_path": "backend/routes/todo.js",
      "start_line": 16,
      "end_line": 19,
      "kind": "route_handler"
    },
    {
      "id": "backend.routes.todo.generateToken",
      "file_path": "backend/routes/todo.js",
      "start_line": 22,
      "end_line": 24,
      "kind": "function"
    }
  ]
}
```

---

#### é€šç”¨æ€§è¯„ä¼°

| æ–¹é¢ | è¯„ä¼° | è¯´æ˜ |
|------|------|------|
| **ä¾èµ–æå–** | âœ… é«˜ | æ”¯æŒrequire/importçš„æ‰€æœ‰å¸¸è§å½¢å¼ |
| **å…¥å£ç‚¹è¯†åˆ«** | âš ï¸ ä¸­ | åªèƒ½è¯†åˆ«Expressé£æ ¼ï¼Œå‘½åå¤„ç†å™¨ |
| **å‡½æ•°è¯†åˆ«è¦†ç›–ç‡** | âœ… é«˜ | 6ç§æ¨¡å¼è¦†ç›–90%+çš„å¸¸è§å†™æ³• |
| **è¡Œå·å‡†ç¡®æ€§** | âœ… é«˜ | æ‹¬å·åŒ¹é…ç®—æ³•ï¼Œå‡†ç¡®ç‡95%+ |
| **TypeScriptæ”¯æŒ** | âš ï¸ ä¸­ | åŸºæœ¬æ”¯æŒï¼Œä½†ä¸è§£æç±»å‹æ³¨è§£ |
| **JSX/Vueæ”¯æŒ** | âš ï¸ ä½ | åªæå–scriptéƒ¨åˆ†ï¼Œå¿½ç•¥template |
| **é”™è¯¯å¤„ç†** | âœ… ä¼˜ç§€ | æ­£åˆ™ä¸åŒ¹é…ä¸ä¼šå´©æºƒ |

**å±€é™æ€§ï¼š**
1. âŒ æ— æ³•è¯†åˆ«åŠ¨æ€è·¯ç”±ï¼ˆå¦‚ `app[method](path)`ï¼‰
2. âŒ æ— æ³•è¯†åˆ«åµŒå¥—å‡½æ•°ï¼ˆåªè¯†åˆ«é¡¶å±‚ï¼‰
3. âŒ å¯¹è±¡æ–¹æ³•è¯†åˆ«å¯èƒ½æœ‰è¯¯æŠ¥ï¼ˆif/forè¯¯åˆ¤ï¼‰
4. âš ï¸ å­—ç¬¦ä¸²è¿‡æ»¤ç®—æ³•ç®€åŒ–ï¼Œå¤æ‚æƒ…å†µå¯èƒ½è¯¯åˆ¤æ‹¬å·

**ä¼˜ç‚¹ï¼š**
1. âœ… æ— éœ€å®‰è£…é¢å¤–çš„JavaScriptè§£æå™¨ï¼ˆå¦‚Babelï¼‰
2. âœ… é€Ÿåº¦å¿«ï¼ˆæ­£åˆ™åŒ¹é…æ¯”ASTå¿«10å€+ï¼‰
3. âœ… è¦†ç›–Express/Koaç­‰ä¸»æµæ¡†æ¶
4. âœ… æ˜“äºæ‰©å±•ï¼ˆæ·»åŠ æ–°çš„æ­£åˆ™æ¨¡å¼ï¼‰

---

### 5ï¸âƒ£ é…ç½®æ–‡ä»¶è§£æå™¨ (`analyze_project_config`)

#### åŠŸèƒ½
è§£æé¡¹ç›®çš„ä¾èµ–é…ç½®æ–‡ä»¶ï¼Œæå–ä¾èµ–åŒ…åç§°å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚

#### æ”¯æŒçš„æ–‡ä»¶

**1. Python: `requirements.txt`**
```
Flask==3.0.0
boto3>=1.26.0
requests
pydantic==2.0.0
```

**è§£æé€»è¾‘ï¼š**
```python
if '==' in line:
    name, version = line.split('==', 1)
    requirements.append({"name": "Flask", "version": "3.0.0"})
elif '>=' in line:
    name, version = line.split('>=', 1)
    requirements.append({"name": "boto3", "version": ">=1.26.0"})
else:
    requirements.append({"name": "requests", "version": None})
```

**2. Node.js: `package.json`**
```json
{
  "dependencies": {
    "express": "^4.18.2",
    "axios": "~1.3.0"
  },
  "devDependencies": {
    "jest": "^29.0.0"
  }
}
```

**è§£æé€»è¾‘ï¼š**
```python
with open(package_json, 'r') as f:
    data = json.load(f)
    
dependencies = [
    {"name": "express", "version": "^4.18.2"},
    {"name": "axios", "version": "~1.3.0"}
]

devDependencies = [
    {"name": "jest", "version": "^29.0.0"}
]
```

#### è¾“å‡ºç¤ºä¾‹
```json
{
  "config_info": {
    "python_dependencies": [
      {"name": "Flask", "version": "3.0.0"},
      {"name": "boto3", "version": ">=1.26.0"}
    ],
    "nodejs_dependencies": {
      "dependencies": [
        {"name": "express", "version": "^4.18.2"}
      ],
      "devDependencies": [
        {"name": "jest", "version": "^29.0.0"}
      ]
    }
  }
}
```

#### ç”¨é€”
- Architect Agent äº†è§£æŠ€æœ¯æ ˆ
- Code Developer Agent ç”Ÿæˆå¯¹åº”çš„ `requirements.txt` æˆ– `package.json`
- ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥

#### é€šç”¨æ€§è¯„ä¼°
âœ… **é«˜åº¦é€šç”¨**
- âœ… æ”¯æŒæ‰€æœ‰æ ‡å‡†æ ¼å¼çš„requirements.txt
- âœ… å®Œæ•´è§£æpackage.jsonçš„dependencieså’ŒdevDependencies
- âœ… å¤„ç†å¤šç§ç‰ˆæœ¬çº¦æŸï¼ˆ==, >=, ^, ~ï¼‰
- âš ï¸ ä¸æ”¯æŒå¤æ‚çš„Pythonä¾èµ–æ ¼å¼ï¼ˆå¦‚ `.[dev]`, git+https://...ï¼‰

---

### 6ï¸âƒ£ DynamoDB Schemaæå–å™¨ (`extract_dynamodb_schemas`)

#### åŠŸèƒ½
ä»Pythonä»£ç ä¸­æå–DynamoDBè¡¨ç»“æ„å®šä¹‰ï¼ˆè¡¨åã€ä¸»é”®ã€GSIã€å±æ€§ç±»å‹ï¼‰ã€‚

#### å·¥ä½œåŸç†

**ä¸¤é˜¶æ®µæå–ç­–ç•¥ï¼š**

##### é˜¶æ®µ1ï¼šASTæ–¹æ³•ï¼ˆç²¾ç¡®ä½†æœ‰é™ï¼‰
```python
tree = ast.parse(source)
for node in ast.walk(tree):
    if isinstance(node, ast.Call):
        # æŸ¥æ‰¾ dynamodb.create_table(...) è°ƒç”¨
        for keyword in node.keywords:
            if keyword.arg == "TableName":
                table_name = keyword.value.value
```

**èƒ½æå–ï¼š**
- âœ… è¡¨åï¼ˆTableNameå‚æ•°ï¼‰

**å±€é™ï¼š**
- âŒ å¤æ‚çš„KeySchemaï¼ˆåµŒå¥—å­—å…¸ï¼‰éš¾ä»¥é€šè¿‡ASTéå†æå–

##### é˜¶æ®µ2ï¼šæ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•ï¼ˆå¹¿æ³›ä½†å¯èƒ½ä¸ç²¾ç¡®ï¼‰

**æå–è¡¨åï¼š**
```python
table_name_pattern = re.compile(r"TableName\s*[=:]\s*['\"]([^'\"]+)['\"]")
```
åŒ¹é…ï¼š
```python
TableName='Users'
TableName: "Products"
```

**æå–åˆ†åŒºé”®ï¼ˆHASHï¼‰ï¼š**
```python
hash_key_pattern = re.compile(
    r"['\"]?AttributeName['\"]?\s*[=:]\s*['\"]([^'\"]+)['\"].*?['\"]?KeyType['\"]?\s*[=:]\s*['\"]HASH['\"]",
    re.DOTALL
)
```
åŒ¹é…ï¼š
```python
{'AttributeName': 'userId', 'KeyType': 'HASH'}
KeySchema=[{"AttributeName": "userId", "KeyType": "HASH"}]
```

**æå–æ’åºé”®ï¼ˆRANGEï¼‰ï¼š**
```python
range_key_pattern = re.compile(
    r"['\"]?AttributeName['\"]?\s*[=:]\s*['\"]([^'\"]+)['\"].*?['\"]?KeyType['\"]?\s*[=:]\s*['\"]RANGE['\"]",
    re.DOTALL
)
```

**æå–å±æ€§ç±»å‹ï¼š**
```python
attr_pattern = re.compile(
    r"['\"]?AttributeName['\"]?\s*[=:]\s*['\"]([^'\"]+)['\"].*?['\"]?AttributeType['\"]?\s*[=:]\s*['\"]([SNB])['\"]"
)
```
åŒ¹é…ï¼š
```python
{'AttributeName': 'email', 'AttributeType': 'S'}  # S=String, N=Number, B=Binary
```

**æå–GSIï¼ˆå…¨å±€äºŒçº§ç´¢å¼•ï¼‰ï¼š**
```python
gsi_pattern = re.compile(
    r"['\"]?IndexName['\"]?\s*[=:]\s*['\"]([^'\"]+)['\"]",
    re.IGNORECASE
)
```

#### å®é™…æ¡ˆä¾‹

**è¾“å…¥ï¼š`backend/config/dynamodb.py`**
```python
import boto3

dynamodb = boto3.client('dynamodb')

# åˆ›å»ºç”¨æˆ·è¡¨
dynamodb.create_table(
    TableName='UsersTable',
    KeySchema=[
        {'AttributeName': 'userId', 'KeyType': 'HASH'},  # åˆ†åŒºé”®
        {'AttributeName': 'createdAt', 'KeyType': 'RANGE'}  # æ’åºé”®
    ],
    AttributeDefinitions=[
        {'AttributeName': 'userId', 'AttributeType': 'S'},
        {'AttributeName': 'email', 'AttributeType': 'S'},
        {'AttributeName': 'createdAt', 'AttributeType': 'N'}
    ],
    GlobalSecondaryIndexes=[
        {
            'IndexName': 'EmailIndex',
            'KeySchema': [
                {'AttributeName': 'email', 'KeyType': 'HASH'}
            ],
            'Projection': {'ProjectionType': 'ALL'}
        }
    ],
    BillingMode='PAY_PER_REQUEST'
)
```

**è¾“å‡ºï¼š**
```json
{
  "dynamodb_tables": [
    {
      "name": "UsersTable",
      "partition_key": "userId",
      "partition_key_type": "S",
      "sort_key": "createdAt",
      "sort_key_type": "N",
      "gsi": [
        {
          "name": "EmailIndex",
          "partition_key": "email",
          "sort_key": null
        }
      ],
      "attributes": [
        {"name": "userId", "type": "S"},
        {"name": "email", "type": "S"},
        {"name": "createdAt", "type": "N"}
      ]
    }
  ]
}
```

#### æ”¯æŒçš„ä»£ç æ¨¡å¼

âœ… **æ”¯æŒï¼š**
```python
# 1. boto3 create_table
dynamodb.create_table(TableName='Users', ...)

# 2. boto3 resource Table
table = dynamodb.Table('Users')

# 3. å­—å…¸å®šä¹‰
table_config = {
    'TableName': 'Users',
    'KeySchema': [...]
}
```

âŒ **ä¸æ”¯æŒï¼š**
```python
# 1. åŠ¨æ€è¡¨å
table_name = os.environ['TABLE_NAME']
dynamodb.create_table(TableName=table_name, ...)

# 2. å˜é‡å¼•ç”¨
USER_TABLE = 'Users'
dynamodb.Table(USER_TABLE)

# 3. JavaScriptä»£ç ä¸­çš„DynamoDBå®šä¹‰
```

#### é€šç”¨æ€§è¯„ä¼°

| æ–¹é¢ | è¯„ä¼° | è¯´æ˜ |
|------|------|------|
| **è¡¨åæå–** | âœ… é«˜ | å‡ ä¹100%æˆåŠŸ |
| **ä¸»é”®æå–** | âœ… é«˜ | æ”¯æŒHASHå’ŒRANGE |
| **GSIæå–** | âš ï¸ ä¸­ | åŸºæœ¬æ”¯æŒï¼Œå¤æ‚åµŒå¥—å¯èƒ½é—æ¼ |
| **å±æ€§ç±»å‹** | âœ… é«˜ | S/N/Bä¸‰ç§ç±»å‹ |
| **åŠ¨æ€è¡¨å** | âŒ ä½ | æ— æ³•å¤„ç†å˜é‡/ç¯å¢ƒå˜é‡ |
| **JavaScriptæ”¯æŒ** | âŒ æ—  | ä»…æ”¯æŒPythonä»£ç  |

**æ”¹è¿›æ–¹å‘ï¼š**
1. å¢åŠ JavaScript DynamoDBä»£ç çš„æ”¯æŒ
2. æ”¯æŒç¯å¢ƒå˜é‡å¼•ç”¨ï¼ˆéœ€ç»“åˆ.envæ–‡ä»¶ï¼‰
3. å¢åŠ å¤æ‚åµŒå¥—ç»“æ„çš„è§£æ

---

## ğŸ“Š å®Œæ•´å·¥ä½œæµç¨‹

```
1. å…¥å£ï¼šrun_static_analysis(monolith_root)
   â†“
2. ç”Ÿæˆé¡¹ç›®ç»“æ„æ ‘
   â”‚  build_project_structure() â†’ ç›®å½•æ ‘å­—ç¬¦ä¸²
   â†“
3. è§£æé…ç½®æ–‡ä»¶
   â”‚  analyze_project_config() â†’ Python/Node.jsä¾èµ–åˆ—è¡¨
   â†“
4. éå†æ‰€æœ‰æºä»£ç æ–‡ä»¶
   â”‚  for each file in monolith_root:
   â”‚    â”œâ”€ .pyæ–‡ä»¶ â†’ analyze_python_file()
   â”‚    â”‚              â”œâ”€ ASTè§£æï¼šä¾èµ–ã€å…¥å£ã€ç¬¦å·è¡¨
   â”‚    â”‚              â””â”€ æ ‡ç­¾ç³»ç»Ÿï¼šæ‰“æ ‡ç­¾
   â”‚    â”œâ”€ .js/.ts/.jsx/.tsx/.vue â†’ analyze_js_like_file()
   â”‚    â”‚              â”œâ”€ æ­£åˆ™æå–ï¼šä¾èµ–ã€å…¥å£
   â”‚    â”‚              â”œâ”€ 6ç§æ¨¡å¼è¯†åˆ«å‡½æ•°
   â”‚    â”‚              â””â”€ æ‹¬å·åŒ¹é…è®¡ç®—end_line
   â”‚    â””â”€ å…¶ä»–æ–‡ä»¶ â†’ è·³è¿‡
   â†“
5. æ±‡æ€»æ‰€æœ‰æ–‡ä»¶çš„ç»“æœ
   â”‚  dependency_graph, file_tags, entry_points, symbol_table
   â†“
6. æå–DynamoDBè¡¨ç»“æ„
   â”‚  extract_dynamodb_schemas()
   â”‚    â”œâ”€ æ‰¾åˆ°æ‰€æœ‰æ ‡è®°ä¸º"DynamoDB"çš„Pythonæ–‡ä»¶
   â”‚    â”œâ”€ AST + æ­£åˆ™åŒé‡æå–
   â”‚    â””â”€ è¾“å‡ºè¡¨ç»“æ„åˆ—è¡¨
   â†“
7. ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š
   â”‚  analysis_report.json
   â””â”€ åŒ…å«ï¼šé¡¹ç›®ç»“æ„ã€å…¥å£ç‚¹ã€ä¾èµ–å›¾ã€æ–‡ä»¶æ ‡ç­¾ã€ç¬¦å·è¡¨ã€DynamoDBè¡¨ã€é…ç½®ä¿¡æ¯
```

---

## ğŸ“¤ è¾“å‡ºæ ¼å¼

**å®Œæ•´çš„ `analysis_report.json` ç»“æ„ï¼š**

```json
{
  // 1. é¡¹ç›®ç»“æ„ï¼ˆæ ‘çŠ¶å­—ç¬¦ä¸²ï¼‰
  "project_structure": "todo/\nâ”œâ”€â”€ backend\nâ”‚   â”œâ”€â”€ routes\n...",
  
  // 2. APIå…¥å£ç‚¹åˆ—è¡¨
  "entry_points": [
    {
      "file": "backend/routes/auth.js",
      "method": "POST",
      "path": "/register",
      "handler": "registerUser"  // å¯èƒ½ä¸ºç©ºï¼ˆåŒ¿åå‡½æ•°ï¼‰
    }
  ],
  
  // 3. ä¾èµ–å…³ç³»å›¾
  "dependency_graph": {
    "backend/server.js": ["express", "./routes/auth", "dotenv"],
    "backend/routes/auth.js": ["bcryptjs", "../config/db"]
  },
  
  // 4. æ–‡ä»¶æ ‡ç­¾æ˜ å°„
  "file_tags": {
    "backend/config/db.js": ["AWS_SDK", "DynamoDB"],
    "frontend/src/App.js": ["Frontend_API_Consumer", "Hardcoded_URL"]
  },
  
  // 5. ç¬¦å·è¡¨ï¼ˆå‡½æ•°/ç±»å®šä¹‰ï¼‰
  "symbol_table": [
    {
      "id": "backend.routes.auth.POST__register",
      "file_path": "backend/routes/auth.js",
      "start_line": 18,
      "end_line": 84,
      "kind": "route_handler"
    },
    {
      "id": "backend.utils.jwt.generateToken",
      "file_path": "backend/utils/jwt.js",
      "start_line": 21,
      "end_line": 27,
      "kind": "function"
    }
  ],
  
  // 6. é…ç½®ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
  "config_info": {
    "python_dependencies": [
      {"name": "Flask", "version": "3.0.0"}
    ],
    "nodejs_dependencies": {
      "dependencies": [
        {"name": "express", "version": "^4.18.2"}
      ]
    }
  },
  
  // 7. DynamoDBè¡¨ç»“æ„ï¼ˆå¯é€‰ï¼‰
  "dynamodb_tables": [
    {
      "name": "UsersTable",
      "partition_key": "userId",
      "partition_key_type": "S",
      "sort_key": null,
      "sort_key_type": null,
      "gsi": [
        {
          "name": "EmailIndex",
          "partition_key": "email",
          "sort_key": null
        }
      ],
      "attributes": [
        {"name": "userId", "type": "S"},
        {"name": "email", "type": "S"}
      ]
    }
  ]
}
```

---

## ğŸ¯ è®¾è®¡å“²å­¦

### 1. èŒè´£å•ä¸€
**åªè´Ÿè´£"æå–ä¿¡æ¯"ï¼Œä¸è´Ÿè´£"å†³ç­–"ã€‚**
- âœ… æå–ï¼šAPIå…¥å£ã€å‡½æ•°å®šä¹‰ã€ä¾èµ–å…³ç³»
- âŒ ä¸åšï¼šæ¶æ„è®¾è®¡ã€ä»£ç è½¬æ¢ã€AWSæœåŠ¡é€‰æ‹©

### 2. å¿«é€Ÿå¤±è´¥
**é‡åˆ°é”™è¯¯ä¸å´©æºƒï¼Œè¿”å›ç©ºç»“æœç»§ç»­ã€‚**
```python
try:
    tree = ast.parse(source)
except SyntaxError:
    return {"symbols": [], "entry_points": []}  # è¿”å›ç©ºï¼Œä¸ä¸­æ–­
```

### 3. åˆ†å±‚å¤„ç†
- **Pythonï¼ˆç²¾ç¡®å±‚ï¼‰**ï¼šä½¿ç”¨ASTï¼Œ100%å‡†ç¡®
- **JavaScriptï¼ˆå¯å‘å¼å±‚ï¼‰**ï¼šä½¿ç”¨æ­£åˆ™ï¼Œ90%è¦†ç›–
- **é…ç½®æ–‡ä»¶ï¼ˆç»“æ„åŒ–å±‚ï¼‰**ï¼šJSONè§£æï¼Œå¯é æ€§é«˜

### 4. å¯æ‰©å±•æ€§
- æ–°å¢æ ‡ç­¾ï¼šä¿®æ”¹ `tag_file()` æ·»åŠ å…³é”®å­—
- æ–°å¢æ¡†æ¶ï¼šä¿®æ”¹è£…é¥°å™¨/è·¯ç”±æ¨¡å¼çš„æ­£åˆ™
- æ–°å¢è¯­è¨€ï¼šå®ç° `analyze_xxx_file()` å‡½æ•°

---

## âœ… æ€»ä½“é€šç”¨æ€§è¯„ä¼°

| æ¨¡å— | é€šç”¨æ€§ | Pythonæ”¯æŒ | JavaScriptæ”¯æŒ | å¯æ‰©å±•æ€§ |
|------|-------|-----------|---------------|---------|
| **é¡¹ç›®ç»“æ„å¯è§†åŒ–** | â­â­â­â­â­ | N/A | N/A | å®Œç¾ |
| **æ–‡ä»¶æ ‡ç­¾ç³»ç»Ÿ** | â­â­â­â­ | é«˜ | é«˜ | æ˜“æ‰©å±• |
| **Pythonåˆ†æå™¨** | â­â­â­â­â­ | æé«˜ï¼ˆASTï¼‰ | N/A | éœ€æ‰‹åŠ¨æ·»åŠ è£…é¥°å™¨ |
| **JavaScriptåˆ†æå™¨** | â­â­â­â­ | N/A | é«˜ï¼ˆæ­£åˆ™ï¼‰ | æ˜“æ‰©å±• |
| **é…ç½®æ–‡ä»¶è§£æ** | â­â­â­â­â­ | é«˜ | é«˜ | å®Œç¾ |
| **DynamoDB Schemaæå–** | â­â­â­ | ä¸­ï¼ˆä»…Pythonï¼‰ | æ—  | éœ€æ‰©å±•JSæ”¯æŒ |

---

## ğŸš€ ä¼˜åŠ¿æ€»ç»“

1. **å…¨æ ˆè¦†ç›–**ï¼šåŒæ—¶æ”¯æŒPythonåç«¯å’ŒJavaScriptå‰ç«¯
2. **å‡†ç¡®æ€§é«˜**ï¼šPythonä½¿ç”¨ASTï¼ˆ100%ï¼‰ï¼ŒJavaScriptä½¿ç”¨æ­£åˆ™ï¼ˆ90%+ï¼‰
3. **æ— å¤–éƒ¨ä¾èµ–**ï¼šä»…ä½¿ç”¨Pythonæ ‡å‡†åº“ï¼ˆast, re, json, osï¼‰
4. **æ€§èƒ½ä¼˜ç§€**ï¼šæ­£åˆ™åŒ¹é…å¿«é€Ÿï¼Œé€‚åˆå¤§å‹é¡¹ç›®
5. **å®¹é”™æ€§å¼º**ï¼šå•ä¸ªæ–‡ä»¶é”™è¯¯ä¸å½±å“æ•´ä½“åˆ†æ
6. **æ˜“äºæ‰©å±•**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ·»åŠ æ–°ç‰¹æ€§åªéœ€ä¿®æ”¹å¯¹åº”æ¨¡å—

---

## âš ï¸ å±€é™æ€§

1. **JavaScriptæ·±åº¦ä¸è¶³**
   - æ— æ³•è§£æTypeScriptç±»å‹ç³»ç»Ÿ
   - JSX/Vueåªæå–scriptéƒ¨åˆ†
   - åµŒå¥—å‡½æ•°è¯†åˆ«æœ‰é™

2. **åŠ¨æ€å†…å®¹æ— æ³•è¯†åˆ«**
   - åŠ¨æ€è·¯ç”±ï¼š`app[method](path)`
   - åŠ¨æ€è¡¨åï¼š`Table(process.env.TABLE_NAME)`
   - å˜é‡å¼•ç”¨çš„ä¾èµ–

3. **æ¡†æ¶æ”¯æŒæœ‰é™**
   - Pythonï¼šFlask, FastAPIï¼ˆéœ€æ‰‹åŠ¨æ·»åŠ Djangoç­‰ï¼‰
   - JavaScriptï¼šExpress, Koaï¼ˆéœ€æ‰‹åŠ¨æ·»åŠ NestJSç­‰ï¼‰

4. **DynamoDBæå–ä»…é™Python**
   - JavaScriptä¸­çš„DynamoDBå®šä¹‰æ— æ³•æå–

---

## ğŸ“š ä½¿ç”¨å»ºè®®

### æœ€é€‚åˆçš„åœºæ™¯
âœ… **Flask/FastAPI + Express + DynamoDB çš„å…¨æ ˆå•ä½“åº”ç”¨**
âœ… **æ ‡å‡†çš„é¡¹ç›®ç»“æ„ï¼ˆbackend/frontendåˆ†ç¦»ï¼‰**
âœ… **ä½¿ç”¨ä¸»æµæ¡†æ¶å’Œæ¨¡å¼çš„ä»£ç **

### éœ€è¦æ³¨æ„çš„åœºæ™¯
âš ï¸ **é«˜åº¦å®šåˆ¶åŒ–çš„æ¡†æ¶**ï¼ˆéœ€æ‰‹åŠ¨æ·»åŠ è¯†åˆ«æ¨¡å¼ï¼‰
âš ï¸ **åŠ¨æ€ç”Ÿæˆçš„è·¯ç”±/è¡¨å**ï¼ˆæ— æ³•é™æ€åˆ†æï¼‰
âš ï¸ **æ··åˆå¤šç§æ•°æ®åº“**ï¼ˆç›®å‰DynamoDBæ”¯æŒæœ€å¥½ï¼‰

---

## ğŸ“ æ€»ç»“

`static_analyzer.py` æ˜¯ä¸€ä¸ª**é€šç”¨æ€§å¼ºã€å‡†ç¡®åº¦é«˜ã€æ˜“äºæ‰©å±•**çš„é™æ€åˆ†æå·¥å…·ã€‚å®ƒé€šè¿‡**ASTï¼ˆPythonï¼‰+ æ­£åˆ™ï¼ˆJavaScriptï¼‰+ å¯å‘å¼**çš„æ··åˆç­–ç•¥ï¼Œåœ¨æ€§èƒ½å’Œå‡†ç¡®æ€§ä¹‹é—´å–å¾—äº†è‰¯å¥½çš„å¹³è¡¡ã€‚

å¯¹äºMAG Systemçš„å•ä½“åˆ°Serverlessè¿ç§»åœºæ™¯ï¼Œå®ƒèƒ½å¤Ÿï¼š
1. âœ… å®Œæ•´æå–APIå…¥å£ç‚¹ï¼ˆLambdaæ‹†åˆ†ä¾æ®ï¼‰
2. âœ… å‡†ç¡®è¯†åˆ«å‡½æ•°ä½ç½®ï¼ˆRAGç´¢å¼•åŸºç¡€ï¼‰
3. âœ… ç²¾ç¡®åˆ†ç±»å‰ç«¯æ–‡ä»¶ï¼ˆéœ€ä¿®æ”¹/çº¯UIï¼‰
4. âœ… æå–DynamoDBè¡¨ç»“æ„ï¼ˆæ•°æ®æ¶æ„è®¾è®¡ï¼‰

**æ˜¯MAG Systemçš„åšå®åŸºç¡€ï¼** ğŸš€
