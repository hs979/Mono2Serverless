{
  "backend_architecture": {
    "lambda_functions": {
      "todo_domain": [
        {
          "name": "GetTodosFunction",
          "description": "Retrieves all todo items for the authenticated user",
          "source": "backend/routes/todo.js - GET /item",
          "runtime": "nodejs20.x",
          "handler": "index.handler",
          "environment_variables": {
            "TODO_TABLE_NAME": "todo-monolith-table",
            "AWS_REGION": "us-east-1"
          },
          "permissions": [
            "dynamodb:Query",
            "dynamodb:Scan"
          ],
          "api_gateway_integration": {
            "method": "GET",
            "path": "/item"
          }
        },
        {
          "name": "GetTodoByIdFunction",
          "description": "Retrieves a specific todo item by ID",
          "source": "backend/routes/todo.js - GET /item/:id",
          "runtime": "nodejs20.x",
          "handler": "index.handler",
          "environment_variables": {
            "TODO_TABLE_NAME": "todo-monolith-table",
            "AWS_REGION": "us-east-1"
          },
          "permissions": [
            "dynamodb:GetItem"
          ],
          "api_gateway_integration": {
            "method": "GET",
            "path": "/item/{id}"
          }
        },
        {
          "name": "CreateTodoFunction",
          "description": "Creates a new todo item",
          "source": "backend/routes/todo.js - POST /item",
          "runtime": "nodejs20.x",
          "handler": "index.handler",
          "environment_variables": {
            "TODO_TABLE_NAME": "todo-monolith-table",
            "AWS_REGION": "us-east-1"
          },
          "permissions": [
            "dynamodb:PutItem"
          ],
          "api_gateway_integration": {
            "method": "POST",
            "path": "/item"
          }
        },
        {
          "name": "UpdateTodoFunction",
          "description": "Updates an existing todo item",
          "source": "backend/routes/todo.js - PUT /item/:id",
          "runtime": "nodejs20.x",
          "handler": "index.handler",
          "environment_variables": {
            "TODO_TABLE_NAME": "todo-monolith-table",
            "AWS_REGION": "us-east-1"
          },
          "permissions": [
            "dynamodb:UpdateItem"
          ],
          "api_gateway_integration": {
            "method": "PUT",
            "path": "/item/{id}"
          }
        },
        {
          "name": "MarkTodoDoneFunction",
          "description": "Marks a todo item as done",
          "source": "backend/routes/todo.js - POST /item/:id/done",
          "runtime": "nodejs20.x",
          "handler": "index.handler",
          "environment_variables": {
            "TODO_TABLE_NAME": "todo-monolith-table",
            "AWS_REGION": "us-east-1"
          },
          "permissions": [
            "dynamodb:UpdateItem"
          ],
          "api_gateway_integration": {
            "method": "POST",
            "path": "/item/{id}/done"
          }
        },
        {
          "name": "DeleteTodoFunction",
          "description": "Deletes a todo item",
          "source": "backend/routes/todo.js - DELETE /item/:id",
          "runtime": "nodejs20.x",
          "handler": "index.handler",
          "environment_variables": {
            "TODO_TABLE_NAME": "todo-monolith-table",
            "AWS_REGION": "us-east-1"
          },
          "permissions": [
            "dynamodb:DeleteItem"
          ],
          "api_gateway_integration": {
            "method": "DELETE",
            "path": "/item/{id}"
          }
        }
      ]
    },
    "step_functions": [],
    "shared_lambda_layers": [
      {
        "name": "CommonUtilitiesLayer",
        "description": "Shared utilities for Lambda functions",
        "compatible_runtimes": ["nodejs20.x"],
        "content": [
          "DynamoDB client configuration",
          "JWT verification utilities",
          "Request/response formatters",
          "Error handling utilities"
        ]
      }
    ],
    "dropped_functions": [
      {
        "name": "RegisterFunction",
        "source": "backend/routes/auth.js - POST /register",
        "reason": "Handled by Amazon Cognito User Pools",
        "cognito_replacement": "Cognito User Pool sign-up flow"
      },
      {
        "name": "LoginFunction",
        "source": "backend/routes/auth.js - POST /login",
        "reason": "Handled by Amazon Cognito User Pools",
        "cognito_replacement": "Cognito User Pool authentication flow"
      }
    ]
  },
  "frontend_architecture": {
    "files_requiring_migration": [
      {
        "path": "frontend/src/config.js",
        "changes": "Replace hardcoded API URL with environment variables and AWS API Gateway endpoint",
        "new_content": "Configuration for AWS Amplify and API Gateway endpoints"
      },
      {
        "path": "frontend/src/App.js",
        "changes": "Update API calls to use AWS Amplify Auth and API modules, replace fetch calls with Amplify.API",
        "migration_strategy": "Replace direct fetch with Amplify.API module calls"
      }
    ],
    "files_to_copy_unchanged": [
      "frontend/src/App.css",
      "frontend/src/ToDo.css",
      "frontend/src/ToDo.js",
      "frontend/src/index.css",
      "frontend/src/index.js",
      "frontend/src/serviceWorker.js",
      "frontend/public/index.html"
    ],
    "new_configuration_files": [
      {
        "path": ".env.example",
        "purpose": "Environment variables template for frontend",
        "content": [
          "REACT_APP_API_ENDPOINT=https://{api-id}.execute-api.{region}.amazonaws.com/{stage}",
          "REACT_APP_REGION=us-east-1",
          "REACT_APP_USER_POOL_ID=your-user-pool-id",
          "REACT_APP_USER_POOL_CLIENT_ID=your-client-id",
          "REACT_APP_IDENTITY_POOL_ID=your-identity-pool-id"
        ]
      },
      {
        "path": "aws-exports.js",
        "purpose": "AWS Amplify configuration file",
        "content": [
          "const awsConfig = {",
          "  Auth: {",
          "    region: process.env.REACT_APP_REGION || 'us-east-1',",
          "    userPoolId: process.env.REACT_APP_USER_POOL_ID,",
          "    userPoolWebClientId: process.env.REACT_APP_USER_POOL_CLIENT_ID,",
          "    identityPoolId: process.env.REACT_APP_IDENTITY_POOL_ID",
          "  },",
          "  API: {",
          "    endpoints: [",
          "      {",
          "        name: 'todoApi',",
          "        endpoint: process.env.REACT_APP_API_ENDPOINT,",
          "        region: process.env.REACT_APP_REGION || 'us-east-1'",
          "      }",
          "    ]",
          "  }",
          "};",
          "",
          "export default awsConfig;"
        ]
      }
    ]
  },
  "data_architecture": {
    "dynamodb_tables": [
      {
        "table_name": "todo-monolith-table",
        "description": "Stores todo items for users",
        "schema": {
          "partition_key": {
            "attribute_name": "cognito-username",
            "attribute_type": "S"
          },
          "sort_key": {
            "attribute_name": "id",
            "attribute_type": "S"
          }
        },
        "billing_mode": "PAY_PER_REQUEST",
        "global_secondary_indexes": [],
        "local_secondary_indexes": [],
        "tags": [
          {"Key": "Application", "Value": "TodoMonolith"},
          {"Key": "Environment", "Value": "{stage}"}
        ]
      },
      {
        "table_name": "todo-monolith-users",
        "description": "Legacy users table - to be deprecated after migration to Cognito",
        "schema": {
          "partition_key": {
            "attribute_name": "username",
            "attribute_type": "S"
          }
        },
        "billing_mode": "PAY_PER_REQUEST",
        "migration_strategy": "Read-only access during transition, eventually delete",
        "retention_period": "30 days post-migration"
      }
    ],
    "table_relationships": [
      {
        "primary_table": "todo-monolith-table",
        "foreign_table": "todo-monolith-users",
        "relationship": "Legacy reference (cognito-username references username)",
        "migration_note": "After Cognito migration, cognito-username will come from Cognito identity token"
      }
    ]
  },
  "authentication_strategy": {
    "service": "Amazon Cognito User Pools",
    "configuration": {
      "user_pool": {
        "name": "TodoAppUserPool",
        "attributes": [
          {"name": "email", "required": true, "mutable": true},
          {"name": "given_name", "required": false, "mutable": true},
          {"name": "family_name", "required": false, "mutable": true}
        ],
        "password_policy": {
          "minimum_length": 8,
          "require_uppercase": true,
          "require_lowercase": true,
          "require_numbers": true,
          "require_symbols": true
        },
        "mfa_configuration": "OPTIONAL",
        "verification_mechanism": "EMAIL"
      },
      "app_client": {
        "name": "TodoAppWebClient",
        "generate_secret": false,
        "auth_flows": {
          "USER_PASSWORD_AUTH": true,
          "REFRESH_TOKEN_AUTH": true
        },
        "oauth_flows": {
          "allowed_oauth_flows": ["code"],
          "allowed_oauth_scopes": ["email", "openid", "profile"],
          "callback_urls": ["http://localhost:3000"],
          "logout_urls": ["http://localhost:3000"]
        }
      },
      "identity_pool": {
        "name": "TodoAppIdentityPool",
        "enable_unauthenticated_identities": false,
        "cognito_identity_providers": ["TodoAppUserPool"]
      }
    },
    "frontend_integration": {
      "approach": "AWS Amplify Library",
      "libraries": ["aws-amplify", "@aws-amplify/ui-react"],
      "authentication_flow": {
        "sign_up": "Amplify Authenticator component or custom UI with Auth.signUp()",
        "sign_in": "Amplify Authenticator component or custom UI with Auth.signIn()",
        "sign_out": "Auth.signOut()",
        "token_retrieval": "Auth.currentSession() to get JWT tokens"
      },
      "api_integration": {
        "method": "Amplify API module with REST API",
        "request_interceptors": "Automatically adds Authorization header with Cognito tokens"
      }
    }
  },
  "api_gateway_configuration": {
    "api_type": "REST API",
    "name": "TodoServerlessAPI",
    "description": "Serverless API for Todo application",
    "resources": [
      {
        "path": "/item",
        "methods": [
          {
            "http_method": "GET",
            "lambda_integration": "GetTodosFunction",
            "authorization": "COGNITO_USER_POOLS",
            "authorizer": "CognitoAuthorizer"
          },
          {
            "http_method": "POST",
            "lambda_integration": "CreateTodoFunction",
            "authorization": "COGNITO_USER_POOLS",
            "authorizer": "CognitoAuthorizer"
          }
        ]
      },
      {
        "path": "/item/{id}",
        "methods": [
          {
            "http_method": "GET",
            "lambda_integration": "GetTodoByIdFunction",
            "authorization": "COGNITO_USER_POOLS",
            "authorizer": "CognitoAuthorizer"
          },
          {
            "http_method": "PUT",
            "lambda_integration": "UpdateTodoFunction",
            "authorization": "COGNITO_USER_POOLS",
            "authorizer": "CognitoAuthorizer"
          },
          {
            "http_method": "DELETE",
            "lambda_integration": "DeleteTodoFunction",
            "authorization": "COGNITO_USER_POOLS",
            "authorizer": "CognitoAuthorizer"
          }
        ]
      },
      {
        "path": "/item/{id}/done",
        "methods": [
          {
            "http_method": "POST",
            "lambda_integration": "MarkTodoDoneFunction",
            "authorization": "COGNITO_USER_POOLS",
            "authorizer": "CognitoAuthorizer"
          }
        ]
      }
    ],
    "cors_configuration": {
      "allow_origins": ["http://localhost:3000", "https://your-domain.com"],
      "allow_methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
      "allow_headers": ["Content-Type", "Authorization", "X-Amz-Date", "X-Api-Key"],
      "max_age": 86400
    },
    "stages": [
      {
        "name": "dev",
        "description": "Development stage",
        "variables": {
          "LOG_LEVEL": "DEBUG",
          "TODO_TABLE_NAME": "todo-monolith-table-dev"
        },
        "deployment": {
          "method": "Automatic via CI/CD pipeline",
          "triggers": ["Git push to dev branch"]
        }
      },
      {
        "name": "prod",
        "description": "Production stage",
        "variables": {