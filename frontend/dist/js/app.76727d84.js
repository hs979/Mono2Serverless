(function(t){function e(e){for(var a,i,c=e[0],s=e[1],u=e[2],l=0,p=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,c=1;c<r.length;c++){var s=r[c];0!==n[s]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=s;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("8a23")},"08a3":function(t,e,r){},"0e45":function(t,e,r){},2727:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=r("8c4f"),o=r("1dce"),i=r.n(o),c=r("b6d0"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-app-bar",{staticClass:"primary",attrs:{"elevate-on-scroll":"",app:""}},[r("v-toolbar-title",[r("router-link",{attrs:{tag:"div",to:"/"}},[r("a",{staticClass:"accent--text header font-weight-black"},[t._v(" DEMO "),r("span",{staticClass:"font-weight-thin subheading secondary--text"},[t._v("Store")])])])],1),r("v-toolbar-items",[t.currentUser?t._e():r("v-btn",{staticClass:"ml-2",attrs:{to:"/auth",text:""}},[t._v("登录 / 注册")]),r("cart-button",{on:{drawerChange:t.toggleDrawer}}),t.currentUser?r("div",{staticClass:"sign-out"},[r("v-btn",{staticClass:"pl-2",attrs:{text:""},on:{click:t.logout}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-logout")]),t._v(" 登出 ("+t._s(t.currentUser.username)+") ")],1)],1):t._e()],1)],1),r("v-main",[r("v-container",{attrs:{fluid:""}},[r("loading-overlay"),r("v-fade-transition",{attrs:{mode:"out-in"}},[r("router-view")],1)],1),r("v-navigation-drawer",{staticStyle:{position:"fixed","overflow-y":"scroll"},attrs:{right:"",temporary:"","align-space-around":"",column:"","d-flex":""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("cart-drawer")],1)],1)],1)},u=[],d=r("5530"),l=r("2f62"),p={name:"app",data:function(){return{drawer:null}},mounted:function(){this.$store.dispatch("initAuth"),this.$store.dispatch("fetchCart")},computed:Object(d["a"])(Object(d["a"])({},Object(l["b"])(["cartSize","currentUser"])),Object(l["c"])(["cartLoading"])),methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push("/")},toggleDrawer:function(){this.drawer=!this.drawer}}},f=p,m=(r("034f"),r("2877")),v=r("6544"),h=r.n(v),g=r("7496"),b=r("40dc"),y=r("8336"),C=r("a523"),w=r("0789"),x=r("132d"),_=r("f774"),k=r("2a7f"),$=Object(m["a"])(f,s,u,!1,null,null,null),V=$.exports;h()($,{VApp:g["a"],VAppBar:b["a"],VBtn:y["a"],VContainer:C["a"],VFadeTransition:w["b"],VIcon:x["a"],VNavigationDrawer:_["a"],VToolbarItems:k["a"],VToolbarTitle:k["b"]});var q=r("1da1"),j=(r("96cf"),r("d3b7"),r("bc3a")),O=r.n(j),L=O.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_BASE_URL||"",withCredentials:!0,headers:{"Content-Type":"application/json"}});function P(t,e,r){return T.apply(this,arguments)}function T(){return T=Object(q["a"])(regeneratorRuntime.mark((function t(e,r,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L.post("/auth/register",{username:e,password:r,email:a});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function I(t,e){return E.apply(this,arguments)}function E(){return E=Object(q["a"])(regeneratorRuntime.mark((function t(e,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L.post("/auth/login",{username:e,password:r});case 2:return a=t.sent,a.data.token&&(localStorage.setItem("authToken",a.data.token),localStorage.setItem("user",JSON.stringify({userId:a.data.userId,username:a.data.username}))),t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)}))),E.apply(this,arguments)}function N(){localStorage.removeItem("authToken"),localStorage.removeItem("user")}function R(){var t=localStorage.getItem("user");return t?JSON.parse(t):null}function S(){return M.apply(this,arguments)}function M(){return M=Object(q["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L.get("/cart");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}function A(t){return D.apply(this,arguments)}function D(){return D=Object(q["a"])(regeneratorRuntime.mark((function t(e){var r,a,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:1,t.next=3,L.post("/cart",{productId:e.productId,quantity:r});case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function U(t,e){return F.apply(this,arguments)}function F(){return F=Object(q["a"])(regeneratorRuntime.mark((function t(e,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L.put("/cart/".concat(e.productId),{quantity:r});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)}))),F.apply(this,arguments)}function B(){return z.apply(this,arguments)}function z(){return z=Object(q["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L.post("/cart/migrate");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)}))),z.apply(this,arguments)}function J(){return G.apply(this,arguments)}function G(){return G=Object(q["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L.post("/cart/checkout");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)}))),G.apply(this,arguments)}function H(){return K.apply(this,arguments)}function K(){return K=Object(q["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L.get("/product");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}L.interceptors.request.use((function(t){var e=localStorage.getItem("authToken");return e&&(t.headers["Authorization"]="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)})),L.interceptors.response.use((function(t){return t}),(function(t){return t.response&&401===t.response.status&&(localStorage.removeItem("authToken"),localStorage.removeItem("user")),Promise.reject(t)}));var Q=function(t,e){var r=t.commit;r("setLoading",{value:e.value,message:e.message})},W=function(t){var e=t.commit,r=R();r&&e("setUser",r)},X=function(t){var e=t.commit;N(),e("setUser",null),e("setUpCart",[])},Y=function(t){var e=t.commit;H().then((function(t){e("setUpProducts",t.products)}))},Z=function(t){var e=t.commit;e("setLoading",{value:!0}),S().then((function(t){e("setUpCart",t.products),e("setLoading",{value:!1})})).catch((function(){e("setLoading",{value:!1})}))},tt=function(t,e){var r=t.commit;r("setProductLoading",{product:e,value:!0,btn:"add"}),A(e).then((function(t){r("setCartLoading",1),r("addToCart",t.productId),r("setProductLoading",{product:e,value:!1,btn:"add"}),setTimeout((function(){r("setCartLoading",-1)}),500)})).catch((function(){r("setProductLoading",{product:e,value:!1,btn:"add"})}))},et=function(t,e){var r=t.commit;r("setProductLoading",{product:e,value:!0,btn:"remove"}),A(e,-1).then((function(t){r("setCartLoading",1),r("removeFromCart",t.productId),r("setProductLoading",{product:e,value:!1,btn:"remove"}),setTimeout((function(){r("setCartLoading",-1)}),500)})).catch((function(){r("setProductLoading",{product:e,value:!1,btn:"remove"})}))},rt=function(t,e){var r=t.commit;U(e.product,e.quantity).then((function(t){r("setCartLoading",1),r("updateCart",t),setTimeout((function(){r("setCartLoading",-1)}),500)}))},at=function(t){var e=t.commit;e("setLoading",{value:!0}),B().then((function(t){e("setUpCart",t.products),e("setLoading",{value:!1})})).catch((function(){e("setLoading",{value:!1})}))},nt=function(t){var e=t.commit;e("setLoading",{value:!0,message:"正在处理支付..."}),J().then((function(){e("setUpCart",[]),setTimeout((function(){e("setLoading",{value:!1})}),3e3),setTimeout((function(){ne.push("/")}),3200)})).catch((function(){e("setLoading",{value:!1})}))},ot={setLoading:Q,fetchCart:Z,fetchProducts:Y,migrateCart:at,updateCart:rt,removeFromCart:et,addToCart:tt,checkoutCart:nt,initAuth:W,logout:X},it=(r("159b"),r("7db0"),r("c740"),r("a434"),function(t,e){t.user=e}),ct=function(t,e){e.forEach((function(t){t.addLoading=!1,t.removeLoading=!1})),t.products=e},st=function(t,e){t.cart=e},ut=function(t,e){var r={};r.productDetail=t.products.find((function(t){return t.productId===e})),r.sk=e;var a=t.cart.find((function(t){return t.sk===e}));a?a.quantity++:t.cart.push(Object(d["a"])(Object(d["a"])({},r),{},{quantity:1}))},dt=function(t,e){var r={};r.productDetail=t.products[e],r.sk=e;var a=t.cart.find((function(t){return t.sk===e}));a.quantity--},lt=function(t,e){var r=t.products.find((function(t){return t.productId===e})),a=t.cart.findIndex((function(t){return t.productId===e}));r.quantity=t.cart[a].stock,t.cart.splice(a,1)},pt=function(t,e){t.loading=e.value,t.loadingText=e.message},ft=function(t,e){t.cartLoading+=e},mt=function(t,e){var r=e.product,a=e.btn,n=e.value,o=t.products.find((function(t){return t.productId===r.productId}));o[a+"Loading"]=n},vt=function(t,e){var r={};r.productDetail=t.products.find((function(t){return t.productId===e.productId})),r.sk=e.productId;var a=t.cart.find((function(t){return t.sk===e.productId}));a?a.quantity=e.quantity:t.cart.push(Object(d["a"])(Object(d["a"])({},r),{},{quantity:e.quantity}))},ht={setUser:it,setUpProducts:ct,setUpCart:st,addToCart:ut,removeFromCart:dt,deleteFromCart:lt,setLoading:pt,setCartLoading:ft,setProductLoading:mt,updateCart:vt},gt=(r("b680"),r("4de4"),r("4128")),bt=function(t){return t.cart.reduce((function(t,e){return t+e.quantity}),0)},yt=function(t){var e=t.cart.reduce((function(t,e){return new gt["Decimal"](t).plus(new gt["Decimal"](e.productDetail.price/100).times(e.quantity))}),0);return new gt["Decimal"](e).toFixed(2)},Ct=function(t){return t.user},wt=function(t){return t.cart.filter((function(t){return t.quantity>0}))},xt={cartSize:bt,cartTotalAmount:yt,currentUser:Ct,getCart:wt};a["a"].use(l["a"]);var _t=new l["a"].Store({state:{products:null,cart:[],user:null,loading:!1,cartLoading:0,loadingText:""},getters:xt,mutations:ht,actions:ot}),kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"mt-0",attrs:{"grid-list-md":"",fluid:"","pt-0":""}},[r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.products,(function(t){return r("v-flex",{key:t.productId,attrs:{xs12:"",lg4:"",sm6:""}},[r("product",{key:t.productId,attrs:{product:t}})],1)})),1)],1)},$t=[],Vt={computed:{products:function(){return this.$store.state.products}},created:function(){this.$store.dispatch("fetchProducts")}},qt=Vt,jt=r("0e8f"),Ot=r("a722"),Lt=Object(m["a"])(qt,kt,$t,!1,null,null,null),Pt=Lt.exports;h()(Lt,{VContainer:C["a"],VFlex:jt["a"],VLayout:Ot["a"]});var Tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"mt-0",attrs:{"grid-list-md":"",fluid:"","pt-0":""}},[r("h1",[t._v("Example payment form")]),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",lg4:"",sm6:""}},[r("v-card",[r("v-container",[r("v-form",{attrs:{"pa-2":"","ma-2":""}},[r("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"#### #### #### ####",expression:"'#### #### #### ####'"}],attrs:{color:"secondary",outlined:"",required:"",label:"Card Number","error-messages":t.cardNumberErrors},on:{input:function(e){return t.$v.cardNumber.$touch()},blur:function(e){return t.$v.cardNumber.$touch()}},model:{value:t.cardNumber,callback:function(e){t.cardNumber=e},expression:"cardNumber"}}),r("v-text-field",{attrs:{color:"secondary",outlined:"",required:"",label:"Cardholder Name","error-messages":t.cardNameErrors},on:{input:function(e){return t.$v.cardName.$touch()},blur:function(e){return t.$v.cardName.$touch()}},model:{value:t.cardName,callback:function(e){t.cardName=e},expression:"cardName"}}),r("v-text-field",{attrs:{color:"secondary",outlined:"",required:"",label:"Card Expiry","error-messages":t.cardExpiryErrors},on:{input:function(e){return t.$v.cardExpiry.$touch()},blur:function(e){return t.$v.cardExpiry.$touch()}},model:{value:t.cardExpiry,callback:function(e){t.cardExpiry=e},expression:"cardExpiry"}}),r("v-text-field",{attrs:{color:"secondary",outlined:"",required:"",label:"Card CVC","error-messages":t.cardCVCErrors},on:{input:function(e){return t.$v.cardCVC.$touch()},blur:function(e){return t.$v.cardCVC.$touch()}},model:{value:t.cardCVC,callback:function(e){t.cardCVC=e},expression:"cardCVC"}}),r("v-btn",{attrs:{block:"",color:"accent"},on:{click:t.submit}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)},It=[],Et=r("b5ae"),Nt=Et["helpers"].regex("alpha",/(\d{4} *\d{4} *\d{4} *\d{4})/),Rt={data:function(){return{cardNumber:null,cardExpiry:null,cardName:null,cardCVC:null}},mixins:[o["validationMixin"]],validations:{cardNumber:{required:Et["required"],ccvalidate:Nt},cardExpiry:{required:Et["required"]},cardCVC:{required:Et["required"]},cardName:{required:Et["required"]}},methods:{submit:function(){this.$v.$touch(),this.$v.$invalid?console.log("invalid form"):this.$store.dispatch("checkoutCart")}},computed:Object(d["a"])(Object(d["a"])(Object(d["a"])({},Object(l["b"])(["cartTotalAmount","getCart"])),Object(l["c"])(["cart"])),{},{cardNumberErrors:function(){var t=[];return this.$v.cardNumber.$dirty?(!this.$v.cardNumber.ccvalidate&&t.push("Valid card number is required."),!this.$v.cardNumber.required&&t.push("Card number is required."),t):t},cardNameErrors:function(){var t=[];return this.$v.cardName.$dirty?(!this.$v.cardName.required&&t.push("Cardholder name is required."),t):t},cardExpiryErrors:function(){var t=[];return this.$v.cardExpiry.$dirty?(!this.$v.cardExpiry.required&&t.push("Cart expiry is required."),t):t},cardCVCErrors:function(){var t=[];return this.$v.cardCVC.$dirty?(!this.$v.cardCVC.required&&t.push("Card CVC is required."),t):t}})},St=Rt,Mt=r("b0af"),At=r("4bd4"),Dt=r("8654"),Ut=Object(m["a"])(St,Tt,It,!1,null,null,null),Ft=Ut.exports;h()(Ut,{VBtn:y["a"],VCard:Mt["a"],VContainer:C["a"],VFlex:jt["a"],VForm:At["a"],VLayout:Ot["a"],VTextField:Dt["a"]});var Bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[r("v-toolbar-title",[t._v(t._s(t.isLogin?"登录":"注册"))]),r("v-spacer")],1),r("v-card-text",[r("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{label:"用户名","prepend-icon":"mdi-account",type:"text",rules:t.usernameRules,required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t.isLogin?t._e():r("v-text-field",{attrs:{label:"邮箱（可选）","prepend-icon":"mdi-email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),r("v-text-field",{attrs:{label:"密码","prepend-icon":"mdi-lock",type:t.showPassword?"text":"password","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",rules:t.passwordRules,required:""},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t.isLogin?t._e():r("v-text-field",{attrs:{label:"确认密码","prepend-icon":"mdi-lock-check",type:t.showPassword?"text":"password",rules:t.confirmPasswordRules,required:""},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1),t.errorMessage?r("v-alert",{staticClass:"mt-4",attrs:{type:"error",dense:""}},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),t.successMessage?r("v-alert",{staticClass:"mt-4",attrs:{type:"success",dense:""}},[t._v(" "+t._s(t.successMessage)+" ")]):t._e()],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.toggleMode}},[t._v(" "+t._s(t.isLogin?"还没有账户？点击注册":"已有账户？点击登录")+" ")]),r("v-spacer"),r("v-btn",{attrs:{color:"primary",disabled:!t.valid||t.loading,loading:t.loading},on:{click:t.handleSubmit}},[t._v(" "+t._s(t.isLogin?"登录":"注册")+" ")])],1)],1)],1)],1)],1)},zt=[],Jt={name:"Auth",data:function(){var t=this;return{isLogin:!0,valid:!1,loading:!1,username:"",email:"",password:"",confirmPassword:"",showPassword:!1,errorMessage:"",successMessage:"",usernameRules:[function(t){return!!t||"用户名不能为空"},function(t){return t&&t.length>=3||"用户名至少3个字符"}],passwordRules:[function(t){return!!t||"密码不能为空"},function(t){return t&&t.length>=6||"密码至少6个字符"}],confirmPasswordRules:[function(t){return!!t||"请确认密码"},function(e){return e===t.password||"两次输入的密码不一致"}]}},methods:{toggleMode:function(){this.isLogin=!this.isLogin,this.errorMessage="",this.successMessage="",this.clearForm()},clearForm:function(){this.username="",this.email="",this.password="",this.confirmPassword="",this.$refs.form&&this.$refs.form.resetValidation()},handleSubmit:function(){var t=this;return Object(q["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$refs.form.validate()){e.next=2;break}return e.abrupt("return");case 2:if(t.loading=!0,t.errorMessage="",t.successMessage="",e.prev=5,!t.isLogin){e.next=15;break}return e.next=9,I(t.username,t.password);case 9:return t.successMessage="登录成功！",e.next=12,t.$store.dispatch("migrateCart");case 12:setTimeout((function(){t.$router.push("/")}),500),e.next=19;break;case 15:return e.next=17,P(t.username,t.password,t.email);case 17:t.successMessage="注册成功！请登录",setTimeout((function(){t.isLogin=!0,t.clearForm()}),1500);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](5),e.t0.response&&e.t0.response.data&&e.t0.response.data.message?t.errorMessage=e.t0.response.data.message:t.errorMessage=t.isLogin?"登录失败，请检查用户名和密码":"注册失败，请稍后重试";case 24:return e.prev=24,t.loading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[5,21,24,27]])})))()}}},Gt=Jt,Ht=(r("a0a5"),r("0798")),Kt=r("99d9"),Qt=r("62ad"),Wt=r("0fd9"),Xt=r("2fa4"),Yt=r("71d9"),Zt=Object(m["a"])(Gt,Bt,zt,!1,null,"79957ca6",null),te=Zt.exports;function ee(){var t=R();return t?(_t.commit("setUser",t),Promise.resolve(t)):Promise.resolve(null)}h()(Zt,{VAlert:Ht["a"],VBtn:y["a"],VCard:Mt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCol:Qt["a"],VContainer:C["a"],VForm:At["a"],VRow:Wt["a"],VSpacer:Xt["a"],VTextField:Dt["a"],VToolbar:Yt["a"],VToolbarTitle:k["b"]});var re=[{path:"/",component:Pt},{path:"/auth",name:"Authenticator",component:te},{path:"/checkout",component:Ft,meta:{requiresAuth:!0}}],ae=new n["a"]({mode:"history",routes:re});ae.beforeResolve(function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e,r,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.matched.some((function(t){return t.meta.requiresAuth}))){t.next=7;break}return t.next=3,ee();case 3:if(n=t.sent,n){t.next=6;break}return t.abrupt("return",a({path:"/auth",query:{redirect:e.fullPath}}));case 6:return t.abrupt("return",a());case 7:return t.abrupt("return",a());case 8:case"end":return t.stop()}}),t)})));return function(e,r,a){return t.apply(this,arguments)}}());var ne=ae,oe=r("f309");a["a"].use(oe["a"]);var ie={theme:{themes:{light:{primary:"#DCE1E9",secondary:"#363732",accent:"#e88b01"}}}},ce=new oe["a"](ie),se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-btn",{attrs:{fixed:"",right:"",rounded:"",small:"",text:"",icon:"","x-large":""},on:{click:function(e){return e.stopPropagation(),t.toggleDrawer(e)}}},[r("v-badge",{class:{"animated-pulse":t.cartLoading>0},attrs:{overlap:"",color:"accent"}},[r("div",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.cartSize))]),r("v-icon",{attrs:{color:"black","x-large":""}},[t._v("mdi-cart")])],1)],1)},ue=[],de={name:"cart-button",computed:Object(d["a"])(Object(d["a"])({},Object(l["b"])(["cartSize"])),Object(l["c"])(["cartLoading"])),data:function(){return{drawer:!1}},methods:{toggleDrawer:function(){this.$emit("drawerChange")}}},le=de,pe=(r("984f"),r("4ca6")),fe=Object(m["a"])(le,se,ue,!1,null,"e748ecac",null),me=fe.exports;h()(fe,{VBadge:pe["a"],VBtn:y["a"],VIcon:x["a"]});var ve=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"items"},[r("v-list-item",[r("v-icon",[t._v("mdi-cart")]),r("v-list-item-content",[r("v-list-item-title",{staticClass:"accent--text font-weight-bold"},[t._v("SHOPPING CART")])],1)],1),r("v-divider"),r("v-list",{attrs:{dense:""}},[t._l(t.getCart,(function(e){return r("v-list-item",{key:e.sk,attrs:{link:""}},[r("v-list-item-content",[r("v-list-item-content",[r("p",[t._v(" "+t._s(e.productDetail.name)+" "),r("span",{staticClass:"font-weight-light"},[t._v("x "+t._s(e.quantity))])]),r("span",{staticClass:"font-weight-light"},[t._v("$"+t._s(t.getTotalPrice(e)))])])],1)],1)})),r("v-list-item-content",[t.cartTotalAmount>0?r("v-list-item",[r("v-btn",{attrs:{to:"/checkout",block:"",color:"accent"}},[t._v("Checkout $"+t._s(t.cartTotalAmount))])],1):r("v-list-item",[t._v("Cart Empty")])],1)],2)],1)},he=[],ge={name:"cart-drawer",data:function(){return{signedIn:!1}},computed:Object(d["a"])(Object(d["a"])({},Object(l["b"])(["cartTotalAmount","getCart"])),Object(l["c"])(["cart"])),methods:{getTotalPrice:function(t){return new gt["Decimal"](t.productDetail.price/100*t.quantity).toFixed(2)}}},be=ge,ye=(r("cf1f"),r("ce7e")),Ce=r("8860"),we=r("da13"),xe=r("5d23"),_e=Object(m["a"])(be,ve,he,!1,null,null,null),ke=_e.exports;h()(_e,{VBtn:y["a"],VDivider:ye["a"],VIcon:x["a"],VList:Ce["a"],VListItem:we["a"],VListItemContent:xe["a"],VListItemTitle:xe["b"]});var $e=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-dialog",{attrs:{persistent:"",fullscreen:"","content-class":"loading-dialog"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[r("v-container",{staticStyle:{height:"300px"},attrs:{"fill-height":"",justify:"center",align:"center"}},[r("v-row",{attrs:{justify:"center",align:"center"}},[r("v-progress-circular",{attrs:{"justify-center":"",indeterminate:"",size:70,width:7,color:"accent"}})],1),t.loadingText?r("v-row",{attrs:{justify:"center",align:"center"}},[r("h1",{staticClass:"accent--text"},[t._v(t._s(t.loadingText))])]):t._e()],1)],1)],1)},Ve=[],qe={name:"loading-overlay",data:function(){return{}},computed:Object(d["a"])({},Object(l["c"])(["loading","loadingText"]))},je=qe,Oe=(r("8e2f"),r("169a")),Le=r("490a"),Pe=Object(m["a"])(je,$e,Ve,!1,null,null,null),Te=Pe.exports;h()(Pe,{VContainer:C["a"],VDialog:Oe["a"],VLayout:Ot["a"],VProgressCircular:Le["a"],VRow:Wt["a"]});var Ie=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"flexcard",attrs:{outlined:"",height:"100%"}},[r("v-row",{staticClass:"pb-0",attrs:{dense:""}},[r("v-col",{staticClass:"mb-5",attrs:{cols:8}},[r("v-card-title",{staticClass:"pb-0 pt-2",attrs:{"primary-title":""}},[r("p",{staticClass:"subtitle-2"},[t._v(t._s(t.product.name))])])],1),r("v-col",[r("p",{staticClass:"text-truncate body-2 pt-2 pb-0 pr-2 grow text-right mb-1"},[t._v(t._s(t.product.category))])])],1),r("v-card-text",{staticClass:"pt-0 pl-4 pb-0"},[r("p",{staticClass:"pt-0 pb-0 mb-0 body-2"},[t._v('"'+t._s(t.product.description)+'"')]),r("p",{staticClass:"price pt-0 pb-0 grow accent--text mb-1"},[t._v("$"+t._s(t.getPrice(t.product)))])]),r("v-card-actions",{staticClass:"card-actions pa-0 ml-3 mb-2 mt-2 justify-center"},[r("v-btn",{attrs:{icon:"",small:"",disabled:t.cartItemCount(t.product.productId)<1,loading:t.product.removeLoading},on:{click:function(e){return t.removeProductFromCart(t.product)}}},[r("v-icon",[t._v("mdi-minus")])],1),r("cart-quantity-editor",{attrs:{product:t.product,value:t.cartItemCount(t.product.productId)},on:{input:t.updateCart}}),r("v-btn",{attrs:{icon:"",small:"",depressed:"",loading:t.product.addLoading},on:{click:function(e){return t.addProductToCart(t.product)}}},[r("v-icon",[t._v("mdi-plus")])],1)],1)],1)},Ee=[],Ne={props:["product"],name:"product",methods:{cartItemCount:function(t){var e=this.$store.state.cart.find((function(e){return e.sk===t}));return e?e.quantity:0},addProductToCart:function(t){this.$store.dispatch("addToCart",t)},removeProductFromCart:function(t){this.$store.dispatch("removeFromCart",t)},getPrice:function(t){return new gt["Decimal"](t.price/100).toFixed(2)},updateCart:function(t){this.$store.dispatch("updateCart",t)}}},Re=Ne,Se=(r("dbed"),Object(m["a"])(Re,Ie,Ee,!1,null,"378b6fe6",null)),Me=Se.exports;h()(Se,{VBtn:y["a"],VCard:Mt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:Kt["c"],VCol:Qt["a"],VIcon:x["a"],VRow:Wt["a"]});var Ae=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.edit?r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.quantity.$model,expression:"$v.quantity.$model",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"cart-quantity-input text-center",class:{"input-error":t.$v.quantity.$error},attrs:{type:"text"},domProps:{value:t.$v.quantity.$model},on:{focus:function(e){t.oldquantity=e.target.value,e.target.select()},blur:[function(e){return t.submit(e,t.product)},function(e){return t.$forceUpdate()}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur()},input:function(e){e.target.composing||t.$set(t.$v.quantity,"$model",e.target.value.trim())}}}):r("div",{staticClass:"pl-2 pr-2 noselect",class:{"font-weight-light":t.quantity<1},on:{click:function(e){t.edit=!0}}},[t._v(t._s(t.quantity))])])},De=[],Ue={props:["value","product"],data:function(){return{edit:!1,quantity:this.value,oldquantity:null}},methods:{submit:function(t,e){this.quantity=t.target.value,this.$v.quantity.$touch(),this.$v.$invalid?(this.quantity=this.oldquantity,this.edit=!1):(this.edit=!1,this.$emit("input",{quantity:this.quantity,product:e}))}},validations:{quantity:{required:Et["required"],between:Object(Et["between"])(0,500),integer:Et["integer"]}},mixins:[o["validationMixin"]],watch:{value:function(){this.quantity=this.value}},directives:{focus:{inserted:function(t){t.focus()}}}},Fe=Ue,Be=(r("d9a7"),Object(m["a"])(Fe,Ae,De,!1,null,"810c5fcc",null)),ze=Be.exports;a["a"].config.productionTip=!1,a["a"].use(n["a"]),a["a"].use(i.a),a["a"].use(c["a"]),a["a"].component("cart-button",me),a["a"].component("cart-drawer",ke),a["a"].component("loading-overlay",Te),a["a"].component("product",Me),a["a"].component("cart-quantity-editor",ze),new a["a"]({render:function(t){return t(V)},router:ne,vuetify:ce,store:_t}).$mount("#app")},"8a23":function(t,e,r){},"8e2f":function(t,e,r){"use strict";r("a947")},"984f":function(t,e,r){"use strict";r("2727")},a0a5:function(t,e,r){"use strict";r("fe52")},a947:function(t,e,r){},cf1f:function(t,e,r){"use strict";r("0e45")},d9a7:function(t,e,r){"use strict";r("f338")},dbed:function(t,e,r){"use strict";r("08a3")},f338:function(t,e,r){},fe52:function(t,e,r){}});
//# sourceMappingURL=app.76727d84.js.map